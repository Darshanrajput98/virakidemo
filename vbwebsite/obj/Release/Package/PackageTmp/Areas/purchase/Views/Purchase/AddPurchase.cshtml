@model vb.Data.AddPurchaseDetail
@{
    ViewBag.Title = "AddPurchase";
    Layout = "~/Areas/purchase/Views/Shared/_purchaselayout.cshtml";
}
<style>
    .dropset ul {
        z-index: 1030 !important;
        height: 200px !important;
        overflow-x: hidden !important;
        overflow-y: auto !important;
    }
</style>

<style>
    .round-button {
        display: block;
        width: 40px;
        height: 40px;
        line-height: 20px;
        border: 2px solid #f5f5f5;
        border-radius: 50%;
        /* color: #f5f5f5; */
        text-align: center;
        text-decoration: none;
        background: #3c8dbc;
        box-shadow: 0 0 3px grey;
        font-size: 10px;
        font-weight: bold;
    }

        .round-button:hover {
            background: red;
        }
</style>

<style>
    .table_wrapper {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
    }

    .td_fixedwidth {
        width: 150px;
    }

    .td_fixedwidthdropdown {
        width: 300px;
    }

    .td_fixedwidthlabel {
        width: 50px;
    }

    .td_fixedwidthlabel2 {
        width: 100px;
    }
</style>


<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">

<div class="box box-default">
    <div class="box-header with-border text-center">
        <h3 class="box-title">Add Purchase Bill</h3>
    </div>
    <form id="frmPurchase" method="post" class="form-horizontal">
        <div class="box-body">
            <div class="col-md-4">
                <div class="form-group">
                    <input name="PurchaseID" id="PurchaseID" type="hidden" value="@Model.PurchaseID" />
                    <input name="SupplierID" id="SupplierID" type="hidden" class="hdnSupplierID" value="@Model.SupplierID" />
                    <input type="hidden" id="CreatedBy" class="CreatedBy" value="@Model.CreatedBy" />
                    <input type="hidden" id="CreatedOn" class="CreatedOn" value="@Model.CreatedOn" />
                    <input type="hidden" id="AvakNumber" class="AvakNumber" value="@Model.AvakNumber" />
                    <input type="hidden" id="Verify" class="Verify" value="@Model.Verify.ToString()" />

                    <input type="hidden" id="TDSPercentage" class="TDSPercentage" value="@Model.TDSPercentage" />
                    <input type="hidden" id="TDSCategoryID" class="TDSCategoryID" value="@Model.TDSCategoryID" />

                    <label for="SupplierName" class="col-sm-4 control-label">Party</label>
                    <div class="col-sm-8 dropset">
                        <input type="text" id="txtSupplierName" class="form-control" tabindex="1" value="@Model.SupplierName" maxlength="100" placeholder="Party Name" autocomplete="off" />
                    </div>
                </div>
                <div class="form-group">
                    <label for="BillNumber" class="col-sm-4 control-label">Bill No.</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control BillNumber" name="BillNumber" id="BillNumber" placeholder="Bill Number" tabindex="4" value="@Model.BillNumber" autocomplete="off" required="required">
                    </div>
                </div>
                <div class="form-group">
                    <label for="DeliveryChallanNumber" class="col-sm-4 control-label">Delivery Challan No.</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="DeliveryChallanNumber" id="DeliveryChallanNumber" placeholder="Challan Number" tabindex="7" value="@Model.DeliveryChallanNumber" autocomplete="off">
                    </div>
                </div>
                <div class="form-group">
                    <label for="BrokerID" class="col-sm-4 control-label">Broker Name</label>
                    <div class="col-sm-8">
                        @Html.DropDownList("BrokerID", new SelectList(ViewBag.Broker, "BrokerID", "BrokerName"), "Select", new { @class = "form-control select2", tabindex = "10" })
                    </div>
                </div>
                <div class="form-group">
                    <label for="Tax" class="col-sm-4 control-label">TDS Category </label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="TDSCategory" id="TDSCategory" placeholder="TDS Category" tabindex="11" value="@Model.TDSCategory" disabled>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="ShipTo" class="col-sm-4 control-label">Ship To</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="ShipTo" id="ShipTo" placeholder="Ship To" tabindex="2" value="@Model.ShipTo" autocomplete="off">
                    </div>
                </div>
                <div class="form-group">
                    <label for="BillDate" class="col-sm-4 control-label">Bill Date </label>
                    <div class="col-sm-8">
                        <div class="input-group date">
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <input type="text" class="form-control pull-right datepicker" id="BillDate" tabindex="5" value="@Model.BillDateStr" autocomplete="off" required="required">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="DeliveryChallanDate" class="col-sm-4 control-label">Delivery Challan Date </label>
                    <div class="col-sm-8">
                        <div class="input-group date">
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <input type="text" class="form-control pull-right datepicker" id="DeliveryChallanDate" tabindex="8" value="@Model.DeliveryChallanDateStr" autocomplete="off">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="EWayNumber" class="col-sm-4 control-label">E Way Number</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="EWayNumber" id="EWayNumber" placeholder="E Way Number" tabindex="4" value="@Model.EWayNumber" autocomplete="off">
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="Tax" class="col-sm-4 control-label">Tax </label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" name="Tax" id="Tax" placeholder="Tax" tabindex="3" value="@Model.Tax" autocomplete="off" disabled="disabled">
                        <input id="TaxID" type="hidden" value="" />
                    </div>
                </div>
                <div class="form-group">
                    <label for="PurchaseTypeID" class="col-sm-4 control-label">Purchase Type</label>
                    <div class="col-sm-8">
                        @Html.DropDownList("PurchaseTypeID", new SelectList(ViewBag.PurchaseType, "PurchaseTypeID", "PurchaseType"), "Select", new { @class = "form-control select2", tabindex = "6", disabled = "disabled" })
                    </div>
                </div>
                <div class="form-group">
                    <label for="DebitAccountTypeID" class="col-sm-4 control-label">Debit Account Type</label>
                    <div class="col-sm-8">
                        @Html.DropDownList("PurchaseDebitAccountTypeID", new SelectList(ViewBag.DebitAccountType, "PurchaseDebitAccountTypeID", "PurchaseDebitAccountType"), "Select", new { @class = "form-control select2", tabindex = "9" })
                    </div>
                </div>
                <div class="form-group">
                    <label for="GodownID" class="col-sm-4 control-label">Godown</label>
                    <div class="col-sm-8">
                        @Html.DropDownList("GodownID", new SelectList(ViewBag.Godown, "GodownID", "GodownName"), "Select", new { @class = "form-control select2", required = "required", tabindex = "9" })
                    </div>
                </div>
            </div>

            <div class="col-md-12">
                <div id="PurchaseList" class="form-horizontal tblresponsive table_wrapper">
                    <table class="table table-bordered table-bordered" id="PurchaseQty">
                        <thead>
                            <tr class="form-group">
                                <th class="nosort">Sr. No.</th>
                                <th class="nosort">Item Name</th>
                                <th class="nosort">HSN Number</th>
                                <th class="nosort">Vakal No</th>
                                <th class="nosort">No of Bags</th>
                                <th class="nosort">Gross Weight</th>
                                <th class="nosort">Tare Weight</th>
                                <th class="nosort">Net Weight</th>
                                <th class="nosort">Rate Per KG</th>
                                <th class="nosort">Amount</th>
                                <th class="nosort">Rate Per Bags</th>
                                <th class="nosort">Packing Charges (Bags)</th>
                                <th class="nosort">Total Packing Charge</th>
                                <th class="nosort">Less Discount (%)</th>
                                <th class="nosort">Discount Amount</th>
                                <th class="nosort">APMC (%)</th>
                                <th class="nosort">APMC Amount</th>
                                <th class="nosort">Total Taxable Amount</th>
                                <th class="nosort">Tax(%)</th>
                                <th class="nosort">CGST Tax(%)</th>
                                <th class="nosort">CGST Tax Amt</th>
                                <th class="nosort">SGST Tax(%)</th>
                                <th class="nosort">SGST Tax Amt</th>
                                <th class="nosort">IGST Tax(%)</th>
                                <th class="nosort">IGST Tax Amt</th>
                                <th class="nosort">Total Tax</th>
                                <th class="nosort">Total Amount</th>
                                <th class="nosort">Hamali</th>
                                <th class="nosort">Insurance</th>
                                <th class="nosort">Transport</th>
                                <th class="nosort">TCS Amt.</th>
                                <th class="nosort">Round Off</th>
                                <th class="nosort">Grand Total Amt.</th>

                                <th class="nosort">TDS Tax(%)</th>
                                <th class="nosort">TDS Tax Amt</th>
                                <th class="nosort">Amt After TDS</th>

                                <th class="nosort">Add</th>
                            </tr>
                        </thead>

                        <tbody>

                            @{int cnt = 0;}
                            @if (@Model.lstPurchaseQty.Count <= 10)
                            {
                                cnt = 10;
                            }
                            else
                            { cnt = @Model.lstPurchaseQty.Count; }


                            @for (int i = 0; i < 10; i++)
                            {
                                <tr class="form-group" id="trclear">
                                    <td id="row">
                                        @(i + 1)
                                    </td>
                                    <td>
                                        @Html.DropDownList("ProductID" + i.ToString(), new SelectList(ViewBag.Product, "ProductID", "ProductName", @Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].ProductID : 0), new { @class = "form-control td_fixedwidthdropdown select22 ProductID", tabindex = (3 * i) + 6, multiple = true })
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].HSNNumber.ToString() : "")</label>
                                    </td>
                                    <td>
                                        <input type="text" class="form-control td_fixedwidth" name="lstPurchaseQty[0].VakalNumber" placeholder="Vakal Number" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].VakalNumber.ToString() : "")" id="VakalNumber" autocomplete="off">
                                    </td>
                                    <td>
                                        <input type="text" class="form-control td_fixedwidth NoofBags" name="lstPurchaseQty[0].NoofBags" placeholder="Bags" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].NoofBags.ToString() : "")" id="NoofBags" autocomplete="off">
                                    </td>
                                    <td>
                                        <input type="text" class="form-control td_fixedwidth" name="lstPurchaseQty[0].GrossWeight" placeholder="Gross Weight" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].GrossWeight.ToString("0.00") : "")" id="GrossWeight" autocomplete="off">
                                    </td>
                                    <td>
                                        <input type="text" class="@(i == 9 ? "form-control  TareWeight td_fixedwidth" : "form-control TareWeight td_fixedwidth")" name="lstPurchaseQty[0].TareWeight" placeholder="Tare Weight" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].TareWeight.ToString("0.00") : "")" id="TareWeight" autocomplete="off">
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel2">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].NetWeight.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <input type="text" class="form-control td_fixedwidth RatePerKG" name="lstPurchaseQty[0].RatePerKG" placeholder="Rate/KG" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].RatePerKG.ToString("0.00") : "")" id="RatePerKG" autocomplete="off">
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel2">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].Amount.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <input type="text" class="form-control td_fixedwidth RatePerBags" name="lstPurchaseQty[0].RatePerBags" placeholder="Rate/Bags" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].RatePerBags.ToString("0.00") : "")" id="RatePerBags" autocomplete="off">
                                    </td>
                                    <td>
                                        <input type="text" class="form-control td_fixedwidth PackingChargesBag" name="lstPurchaseQty[0].PackingChargesBag" placeholder="Packing Charges" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].PackingChargesBag.ToString("0.00") : "")" id="PackingChargesBag" autocomplete="off">
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].TotalPackingCharge.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <input type="text" class="form-control td_fixedwidth LessDiscount" name="lstPurchaseQty[0].LessDiscount" placeholder="Less Discount" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].LessDiscount.ToString("0.00") : "")" id="LessDiscount" autocomplete="off">
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].DiscountAmount.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <input type="text" class="form-control td_fixedwidth APMC" name="lstPurchaseQty[0].APMC" placeholder="APMC" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].APMC.ToString("0.00") : "")" id="APMC" autocomplete="off">
                                    </td>
                                    <td>
                                        <input type="text" class="form-control td_fixedwidth APMCAmount" name="lstPurchaseQty[0].APMCAmount" placeholder="APMC Amount" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].APMCAmount.ToString("0.00") : "")" id="APMCAmount" autocomplete="off">
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].TotalTaxableAmount.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].TotalTax.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].CGSTTax.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].CGSTTaxAmount.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].SGSTTax.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].SGSTTaxAmount.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].IGSTTax.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].IGSTTaxAmount.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel2">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].TotalTaxAmount.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel2">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].TotalAmount.ToString("0.00") : "")</label>
                                    </td>
                                    <td>
                                        <input type="text" class="form-control td_fixedwidth Hamali" name="lstPurchaseQty[0].Hamali" placeholder="Hamali" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].Hamali.ToString("0.00") : "")" id="Hamali" autocomplete="off">
                                    </td>
                                    <td>
                                        <input type="text" class="form-control td_fixedwidth Insurance" name="lstPurchaseQty[0].Insurance" placeholder="Insurance" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].Insurance.ToString("0.00") : "")" id="Insurance" autocomplete="off">
                                    </td>
                                    <td>
                                        <input type="text" class="@(i == 9 ? "form-control  td_fixedwidth TransportInward" : "form-control td_fixedwidth TransportInward")" name="lstPurchaseQty[0].TransportInward" placeholder="Transport Ins" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].TransportInward.ToString("0.00") : "")" id="TransportInward" autocomplete="off">
                                        <input type="hidden" class="form-control" name="lstPurchaseQty[0].CategoryTypeID" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].CategoryTypeID.ToString() : "")">
                                        <input type="hidden" class="form-control" name="lstPurchaseQty[0].PurchaseQtyID" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].PurchaseQtyID.ToString() : "")">
                                    </td>
                                    <td>
                                        <input type="text" class="form-control td_fixedwidth TCSAmount" name="lstPurchaseQty[0].TCSAmount" placeholder="TCS Amount" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].TCSAmount.ToString("0.00") : "")" id="TCSAmount" autocomplete="off">
                                    </td>
                                    <td>
                                        <input type="text" class="form-control td_fixedwidth RoundOff" name="lstPurchaseQty[0].RoundOff" placeholder="Round Off" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].RoundOff.ToString("0.00") : "")" id="RoundOff" autocomplete="off">
                                    </td>
                                    <td>
                                        <label for="srno" class="control-label td_fixedwidthlabel2">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].GrandTotalAmount.ToString("0.00") : "")</label>
                                    </td>



                                    <td>
                                        <input type="text" class="form-control td_fixedwidth TDSTax addenter" placeholder="TDS Tax" name="lstExpenseQty[0].TDSTax" value="@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].TDSTax.ToString("0.00") : "")" id="TDSTax" autocomplete="off">
                                    </td>
                                    <td><label for="srno" class="control-label td_fixedwidthlabel">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].TDSTaxAmount.ToString("0.00") : "")</label></td>
                                    <td><label for="srno" class="control-label td_fixedwidthlabel">@(Model.lstPurchaseQty.Count > i ? @Model.lstPurchaseQty[i].AmountAfterTDS.ToString("0.00") : "")</label></td>



                                    <td>
                                        <button type="button" class="btn btn-default removeButton tab-content" style="width: 35px;"><i class="fa fa-times-circle"></i></button>
                                    </td>
                                    <td style="display:none;"></td>
                                </tr>
                            }
                            <tr class="form-group hide" id="AddPurchase">
                                <td class="row"></td>
                                <td>
                                    @Html.DropDownList("ProductID", new SelectList(ViewBag.Product, "ProductID", "ProductName"), new { @class = "form-control select22 ProductID td_fixedwidthdropdown", tabindex = "36", multiple = true })
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel"> </label>
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth" name="VakalNumber" placeholder="Vakal Number">
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth NoofBags" name="NoofBags" placeholder="Bags">
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth GrossWeight" name="GrossWeight" placeholder="Gross Weight">
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth TareWeight" name="TareWeight" placeholder="Tare Weight">
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel2"></label>
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth RatePerKG" name="RatePerKG" placeholder="Rate/KG">
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel2"></label>
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth RatePerBags" name="RatePerBags" placeholder="Rate/Bags">
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth PackingChargesBag" name="PackingChargesBag" placeholder="Packing Charges">
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel"></label>
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth LessDiscount" name="LessDiscount" placeholder="Less Discount">
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel"></label>
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth APMC" name="APMC" placeholder="APMC">
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth APMCAmount" name="APMCAmount" placeholder="APMC Amount">
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel"></label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel"></label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel"></label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel"></label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel"></label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel"></label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel"></label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel"></label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel2"></label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel2"></label>
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth Hamali" name="Hamali" placeholder="Hamali">
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth Insurance" name="Insurance" placeholder="Insurance">
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth TransportInward" name="TransportInward" placeholder="Transport Ins.">
                                    <input type="hidden" class="form-control" name="CategoryTypeID">
                                    <input type="hidden" class="form-control" name="PurchaseQtyID">
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth TCSAmount" name="TCSAmount" placeholder="TCS Amount">
                                </td>
                                <td>
                                    <input type="text" class="form-control td_fixedwidth RoundOff" name="RoundOff" placeholder="Round Off">
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel2"></label>
                                </td>



                                <td>
                                    <input type="text" class="form-control td_fixedwidth TDSTax addenter" placeholder="TDS Tax">
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel"></label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label td_fixedwidthlabel"></label>
                                </td>


                                <td>
                                    <button type="button" class="btn btn-default removeButton tab-content" style="width: 35px;"><i class="fa fa-times-circle"></i></button>
                                </td>
                                <td style="display:none;"></td>
                            </tr>


                            @*New Add*@
                            <tr class="form-group" id="GTID">
                                <td id="row"></td>
                                <td>
                                    <label for="srno" class="control-label"></label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"></label>
                                </td>


                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>


                                <td>
                                    <button type="button" id="btncalculate" class="btn btn-info" tabindex="100001">Calculate</button>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> Total</label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label" id="GrandTotal"> </label>
                                </td>
                                <td>
                                    <label for="srno" class="control-label"> </label>
                                </td>
                                <td style="display:none;"></td>
                            </tr>
                            @*New Add*@

                        </tbody>
                    </table>
                </div>


            </div>
        </div>
        <!-- /.box-body -->
        <div class="box-footer ">
            <div class="pull-right">
                <button type="button" id="btncancel" class="btn btn-default" tabindex="100003">Cancel</button>
                <button type="button" id="btnsave" class="btn btn-info" tabindex="100002">Add Purchase</button>
            </div>
        </div>
        <!-- /.box-footer -->
    </form>
</div>

<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {

        $("#PurchaseTypeID").val(1).trigger("change");



        // 25 Aug 2020 Piyush Limbani
        $('#BillDate').datepicker({
            autoclose: true,
        }).on('changeDate', function (ev) {
            debugger;
            var SupplierID = $("#SupplierID").val();
            var BillNumber = $("#BillNumber").val();
            var BillDate = $("#BillDate").val();
            //if ($("#BillNumber").val() != "") {
            if (BillNumber != "" && BillDate != "") {
                $.ajax({
                    type: 'Post',
                    url: '@Url.Action("CheckSupplierCurrentYearBillNumber")',
                    data: { 'BillNumber': BillNumber, 'SupplierID': SupplierID, 'BillDate': BillDate },
                    success: function (result) {
                        debugger;
                        if (result == "") {
                            $('#BillNumber').val(BillNumber);
                        }
                        else {
                            alert("bill number already exist for supplier");
                            $('#BillNumber').val("");
                            $('#BillDate').val("");
                        }
                    },
                    error: function () { alert('Error'); }
                });
            }
            else {
                alert("please fill bill number");
            }

            //}
            //else {
            //    alert('select godown');
            //}
        });
        // 25 Aug 2020 Piyush Limbani




        // 13/07/2019
        @*$(".BillNumber").on('blur', function (e) {
            var BillNumber = this.value;
            var SupplierID = $("#SupplierID").val();
            debugger;
            if (BillNumber != "") {
                $.ajax({
                    type: 'Post',
                    url: '@Url.Action("CheckSupplierCurrentYearBillNumber")',
                    data: { 'BillNumber': BillNumber, 'SupplierID': SupplierID },
                    success: function (result) {
                        debugger;
                        if (result == "") {
                            $('#BillNumber').val(BillNumber);
                        }
                        else {
                            alert("bill number already exist for supplier");
                            $('#BillNumber').val("");
                        }
                    },
                    error: function () { alert('Error'); }
                });
            }
            else { alert("please fill bill number"); }
        });*@
        // 13/07/2019





        $("#txtSupplierName").autocomplete({
            source: function (request, response) {
                debugger;
                $.ajax({
                    url: '@Url.Action("txtSupplierName_TextChanged")',
                    type: 'POST',
                    dataType: 'json',
                    data: { 'obj': request.term },
                    success: function (data) {
                        //debugger;
                        response($.map(data, function (item) {
                            //debugger;
                            $('#ui-id-1').appendTo('.dropset');
                            $("#loader").hide();
                            return { label: item.SupplierName, value: item.SupplierName };
                        }))
                        $("#loader").hide();
                    }
                })
            },
            messages: {
                noResults: "", results: ""
            }
        });

        $(document).on('keyup focusin mousedown  keypress blur change', "#txtSupplierName", function () {
            var set = $("#txtSupplierName").val();
            debugger;
            if (set != "") {
                var check = set.split(',').length;
                if (check >= 2) {
                    $.ajax({
                        type: 'Post',
                        url: '@Url.Action("txtSupplierName_AfterSupplierSelect")',
                        data: { obj: set },
                        success: function (result) {
                            debugger;
                            $('#SupplierID').val(result.SupplierID);
                            $('#txtSupplierName').val(result.SupplierName);
                            $('#TaxID').val(result.TaxID);
                            $('#Tax').val(result.TaxName);
                            $('#ShipTo').val(result.ShipTo);
                            $('#TDSPercentage').val(result.TDSPercentage);
                            $('#TDSCategoryID').val(result.TDSCategoryID);
                            $('#TDSCategory').val(result.TDSCategory);

                            // $('#BillNumber').focus();
                        },
                        error: function () { alert('Error'); }
                    });
                }
            }
        });

        $(".ProductID").on('change keypress', function (e) {
            debugger;
            var end = this;

            var TDSPercentage = $("#TDSPercentage").val();

            if (this.value != '') {
                var Tax = $("#Tax").val();
                var SupplierID = $("#SupplierID").val();
                if (SupplierID != "" && SupplierID != 0) {
                    $.ajax({
                        type: 'Post',
                        url: '@Url.Action("GetUnit")',
                        data: { ProductID: this.value, Tax: Tax },
                        success: function (result) {
                            var newdata = end;
                            $(newdata).closest('tr').find('td').each(function (index, td) {

                                var textbox = $(newdata).closest('tr').find('input')[14];
                                textbox.value = result[0].CategoryTypeID;

                                if (index == 2) {
                                    td.innerText = result[0].HSNNumber
                                }
                                if (index == 3) {
                                    $(td).find('input').focus();
                                }
                                if (index == 18) {
                                    td.innerText = result[0].Tax
                                }

                                if (index == 19) {
                                    td.innerText = result[0].CGST
                                }
                                if (index == 20) {
                                    td.innerText = result[0].TaxAmtCGST
                                }
                                if (index == 21) {
                                    td.innerText = result[0].SGST
                                }
                                if (index == 22) {
                                    td.innerText = result[0].TaxAmtSGST
                                }
                                if (index == 23) {
                                    td.innerText = result[0].IGST
                                }
                                if (index == 24) {
                                    td.innerText = result[0].TaxAmtIGST
                                }


                                if (index == 33) {
                                    var textbox = $(newdata).closest('tr').find('input')[18];
                                    textbox.value = TDSPercentage;
                                }


                            });
                        },
                        error: function () { alert('Error'); }
                    });
                }
                else {
                    alert("Please Select Party");
                    // $('#txtSupplierName').focus();
                }

                // get last product Rate Per KG
                $.ajax({
                    type: 'Post',
                    url: '@Url.Action("GetLastPurchaseProductRatePerKG")',
                    data: { ProductID: this.value },
                    success: function (result) {
                        debugger;
                        var newdata = end;
                        $(newdata).closest('tr').find('td').each(function (index, td) {
                            if (index == 8) {
                                //var textbox = $(newdata).closest('tr').find('input')[5];
                                //textbox.value = "";

                                var textbox = $(newdata).closest('tr').find('input')[5];
                                textbox.value = result[0].RatePerKG;


                            }
                        });
                    },
                    error: function () { alert('Error'); }
                });

            }
            else {
                var newdata = end;
                $(newdata).closest('tr').find('td').each(function (index, td) {
                    if (index == 2) {
                        td.innerText = "";
                        $('#btnsave').attr('disabled', false);
                    }
                    else if (index == 3) {
                        var textbox = $(newdata).closest('tr').find('input')[1];
                        textbox.value = "";
                    }
                    else if (index == 4) {
                        var textbox = $(newdata).closest('tr').find('input')[2];
                        textbox.value = "";
                    }
                    else if (index == 5) {
                        var textbox = $(newdata).closest('tr').find('input')[3];
                        textbox.value = "";
                    }
                    else if (index == 6) {
                        var textbox = $(newdata).closest('tr').find('input')[4];
                        textbox.value = "";
                    }
                    else if (index == 7) {
                        td.innerText = "";
                    }
                    else if (index == 8) {
                        var textbox = $(newdata).closest('tr').find('input')[5];
                        textbox.value = "";
                    }
                    else if (index == 9) {
                        td.innerText = "";
                    }
                    else if (index == 10) {
                        var textbox = $(newdata).closest('tr').find('input')[6];
                        textbox.value = "";
                    }
                    else if (index == 11) {
                        var textbox = $(newdata).closest('tr').find('input')[7];
                        textbox.value = "";
                    }
                    else if (index == 12) {
                        td.innerText = "";
                    }
                    else if (index == 13) {
                        var textbox = $(newdata).closest('tr').find('input')[8];
                        textbox.value = "";
                    }
                    else if (index == 14) {
                        td.innerText = "";
                    }
                    else if (index == 15) {
                        var textbox = $(newdata).closest('tr').find('input')[9];
                        textbox.value = "";
                    }
                    else if (index == 16) {
                        var textbox = $(newdata).closest('tr').find('input')[10];
                        textbox.value = "";
                    }
                    else if (index == 17) {
                        td.innerText = "";
                    }
                    else if (index == 18) {
                        td.innerText = "";
                    }
                    else if (index == 19) {
                        td.innerText = "";
                    }
                    else if (index == 20) {
                        td.innerText = "";
                    }
                    else if (index == 21) {
                        td.innerText = "";
                    }
                    else if (index == 22) {
                        td.innerText = "";
                    }
                    else if (index == 23) {
                        td.innerText = "";
                    }
                    else if (index == 24) {
                        td.innerText = "";
                    }
                    else if (index == 25) {
                        td.innerText = "";
                    }
                    else if (index == 26) {
                        td.innerText = "";
                    }
                    else if (index == 27) {
                        var textbox = $(newdata).closest('tr').find('input')[11];
                        textbox.value = "";
                    }
                    else if (index == 28) {
                        var textbox = $(newdata).closest('tr').find('input')[12];
                        textbox.value = "";
                    }
                    else if (index == 29) {
                        var textbox = $(newdata).closest('tr').find('input')[13];
                        textbox.value = "";
                    }
                    else if (index == 30) {
                        var textbox = $(newdata).closest('tr').find('input')[16];
                        textbox.value = "";
                    }
                    else if (index == 31) {
                        var textbox = $(newdata).closest('tr').find('input')[17];
                        textbox.value = "";
                    }
                    else if (index == 32) {
                        td.innerText = "";
                    }
                    else if (index == 33) {
                        var textbox = $(newdata).closest('tr').find('input')[18];
                        textbox.value = "";
                    }
                    else if (index == 34) {
                        td.innerText = "";
                    }
                    else if (index == 35) {
                        td.innerText = "";
                    }
                });
            }
        });

        var ProductNameValidators = {
            row: '.col-xs-3',   // The title is placed inside a <div class="col-xs-4"> element
            validators: {
                notEmpty: {
                    message: 'The Product Name is required'
                }
            }
        },
         QuantityValidators = {
             row: '.col-xs-1',
             validators: {
                 notEmpty: {
                     message: 'The Quantity is required'
                 },
                 Quantity: {
                     message: 'The Quantity is not valid'
                 }
             }
         },

         SellRateValidators = {
             row: '.col-xs-1',
             validators: {
                 notEmpty: {
                     message: 'Sell Rate is required'
                 },
                 SellRate: {
                     message: 'Sell Rate is not valid'
                 }
             }
         },

         bookIndex = 10;
        $('#PurchaseList').on('keydown', '.addenter', function (e) {
            debugger;
            if (e.keyCode == 13) {
                bookIndex++;
                var $template = $('#AddPurchase'),
                    $clone = $template
                                    .clone()
                                    .removeClass('hide')
                                    .removeAttr('id')
                                    .attr('data-book-index', bookIndex)
                                    .insertBefore($template);
                debugger;
                // Update the name attributes
                $clone
                    .find('[name="ProductID"]').attr('tabindex', (bookIndex * 3) + 6).attr('name', 'lstPurchaseQty[' + bookIndex + '].ProductID').end()
                    .find('[name="VakalNumber"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].VakalNumber').end()
                    .find('[name="NoofBags"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].NoofBags').end()
                    .find('[name="GrossWeight"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].GrossWeight').end()
                    .find('[name="RatePerKG"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].RatePerKG').end()
                    .find('[name="RatePerBags"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].RatePerBags').end()
                    .find('[name="PackingChargesBag"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].PackingChargesBag').end()
                    .find('[name="Hamali"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].Hamali').end()
                    .find('[name="LessDiscount"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].LessDiscount').end()
                    .find('[name="APMC"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].APMC').end()
                    .find('[name="APMCAmount"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].APMCAmount').end()
                    .find('[name="TareWeight"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].TareWeight').end()
                    .find('[name="Insurance"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].Insurance').end()
                    .find('[name="TransportInward"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].TransportInward').end()
                    .find('[name="TCSAmount"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].TCSAmount').end()
                    .find('[name="RoundOff"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].RoundOff').end()


                    .find('[name="TDSPercentage"]').attr('name', 'lstPurchaseQty[' + bookIndex + '].TDSPercentage').end();


                $($clone).find('select').select2({ width: '100%' });
                $tdvalue = $clone.find('td')[1];
                $($tdvalue).find('span.select2.select2-container.select2-container--default')[1].remove();
                $($clone).find(".select22").select2({
                    maximumSelectionLength: 1
                });

                //var i = 1;
                //$('#PurchaseQty').children('tbody').children('tr:visible').each(function (index, row) {
                //    if (index != ($('#PurchaseQty').children('tbody').children('tr:visible').length)) {
                //        $(row).find("td")[0].innerText = i++;
                //    }
                //});


                var i = 1;
                $('#PurchaseQty').children('tbody').children('tr:visible').each(function (index, row) {
                    if (index != ($('#PurchaseQty').children('tbody').children('tr:visible').length - 1)) {
                        $(row).find("td")[0].innerText = i++;
                    }
                });



                $(document).on('change', ".select22", function () {
                    var end = this;
                    var TDSPercentage = $("#TDSPercentage").val();
                    if (this.value != '') {
                        var Tax = $("#Tax").val();
                        var SupplierID = $("#SupplierID").val();
                        if (SupplierID != "" && SupplierID != 0) {
                            $.ajax({
                                type: 'Post',
                                url: '@Url.Action("GetUnit")',
                                data: { ProductID: this.value, Tax: Tax },
                                success: function (result) {
                                    var newdata = end;
                                    $(newdata).closest('tr').find('td').each(function (index, td) {
                                        var textbox = $(newdata).closest('tr').find('input')[14];
                                        textbox.value = result[0].CategoryTypeID;
                                        if (index == 2) {
                                            td.innerText = result[0].HSNNumber
                                        }
                                        if (index == 3) {
                                            $(td).find('input').focus();
                                        }
                                        if (index == 18) {
                                            td.innerText = result[0].Tax
                                        }
                                        if (index == 19) {
                                            td.innerText = result[0].CGST
                                        }
                                        if (index == 20) {
                                            td.innerText = result[0].TaxAmtCGST
                                        }
                                        if (index == 21) {
                                            td.innerText = result[0].SGST
                                        }
                                        if (index == 22) {
                                            td.innerText = result[0].TaxAmtSGST
                                        }
                                        if (index == 23) {
                                            td.innerText = result[0].IGST
                                        }
                                        if (index == 24) {
                                            td.innerText = result[0].TaxAmtIGST
                                        }



                                        if (index == 33) {
                                            var textbox = $(newdata).closest('tr').find('input')[18];
                                            textbox.value = TDSPercentage;
                                        }

                                    });
                                },
                                error: function () { alert('Error'); }
                            });
                        }
                        else {
                            alert("Please Select Party");
                            // $('#txtSupplierName').focus();
                        }

                        // get last product Rate Per KG 06-10-200
                        $.ajax({
                            type: 'Post',
                            url: '@Url.Action("GetLastPurchaseProductRatePerKG")',
                            data: { ProductID: this.value },
                            success: function (result) {
                                debugger;
                                var newdata = end;
                                $(newdata).closest('tr').find('td').each(function (index, td) {
                                    if (index == 8) {
                                        var textbox = $(newdata).closest('tr').find('input')[5];
                                        textbox.value = result[0].RatePerKG;
                                    }
                                });
                            },
                            error: function () { alert('Error'); }
                        });
                    }
                    else {
                        var newdata = end;
                        $(newdata).closest('tr').find('td').each(function (index, td) {
                            if (index == 2) {
                                td.innerText = "";
                                $('#btnsave').attr('disabled', false);
                            }
                            else if (index == 3) {
                                var textbox = $(newdata).closest('tr').find('input')[1];
                                textbox.value = "";
                            }
                            else if (index == 4) {
                                var textbox = $(newdata).closest('tr').find('input')[2];
                                textbox.value = "";
                            }
                            else if (index == 5) {
                                var textbox = $(newdata).closest('tr').find('input')[3];
                                textbox.value = "";
                            }
                            else if (index == 6) {
                                var textbox = $(newdata).closest('tr').find('input')[4];
                                textbox.value = "";
                            }
                            else if (index == 7) {
                                td.innerText = "";
                            }
                            else if (index == 8) {
                                var textbox = $(newdata).closest('tr').find('input')[5];
                                textbox.value = "";
                            }
                            else if (index == 9) {
                                td.innerText = "";
                            }
                            else if (index == 10) {
                                var textbox = $(newdata).closest('tr').find('input')[6];
                                textbox.value = "";
                            }
                            else if (index == 11) {
                                var textbox = $(newdata).closest('tr').find('input')[7];
                                textbox.value = "";
                            }
                            else if (index == 12) {
                                td.innerText = "";
                            }
                            else if (index == 13) {
                                var textbox = $(newdata).closest('tr').find('input')[8];
                                textbox.value = "";
                            }
                            else if (index == 14) {
                                td.innerText = "";
                            }
                            else if (index == 15) {
                                var textbox = $(newdata).closest('tr').find('input')[9];
                                textbox.value = "";
                            }
                            else if (index == 16) {
                                var textbox = $(newdata).closest('tr').find('input')[10];
                                textbox.value = "";
                            }
                            else if (index == 17) {
                                td.innerText = "";
                            }
                            else if (index == 18) {
                                td.innerText = "";
                            }
                            else if (index == 19) {
                                td.innerText = "";
                            }
                            else if (index == 20) {
                                td.innerText = "";
                            }
                            else if (index == 21) {
                                td.innerText = "";
                            }
                            else if (index == 22) {
                                td.innerText = "";
                            }
                            else if (index == 23) {
                                td.innerText = "";
                            }
                            else if (index == 24) {
                                td.innerText = "";
                            }
                            else if (index == 25) {
                                td.innerText = "";
                            }
                            else if (index == 26) {
                                td.innerText = "";
                            }
                            else if (index == 27) {
                                var textbox = $(newdata).closest('tr').find('input')[11];
                                textbox.value = "";
                            }
                            else if (index == 28) {
                                var textbox = $(newdata).closest('tr').find('input')[12];
                                textbox.value = "";
                            }
                            else if (index == 29) {
                                var textbox = $(newdata).closest('tr').find('input')[13];
                                textbox.value = "";
                            }
                            else if (index == 30) {
                                var textbox = $(newdata).closest('tr').find('input')[16];
                                textbox.value = "";
                            }
                            else if (index == 31) {
                                var textbox = $(newdata).closest('tr').find('input')[17];
                                textbox.value = "";
                            }
                            else if (index == 32) {
                                td.innerText = "";
                            }



                            else if (index == 33) {
                                var textbox = $(newdata).closest('tr').find('input')[18];
                                textbox.value = "";
                            }
                            else if (index == 34) {
                                td.innerText = "";
                            }
                            else if (index == 35) {
                                td.innerText = "";
                            }

                        });
                    }
                });

                // Dynamic Table Value
                $(".TareWeight").on('input propertychange paste keypress', function (e) {
                    var end = this;
                    debugger;
                    if (this.value != '') {
                        var TareWeight = this.value;
                        var row = $(this).closest('tr');
                        var NoofBagsTextBox = $(row).find('input')[2].value;
                        var GrossWeightTetxbox = $(row).find('input')[3];
                        var RatePerKGTextBox = $(row).find('input')[5].value;
                        var PackingChargesBagTextBox = $(row).find('input')[7].value;
                        var LessDiscountTextBox = $(row).find('input')[8].value;
                        var APMCTextBox = $(row).find('input')[9].value;
                        var HamaliTextBox = $(row).find('input')[11].value;
                        var InsuranceTextBox = $(row).find('input')[12].value;
                        var TransportInwardTextBox = $(row).find('input')[13].value;

                        var TDSTaxTextBox = $(row).find('input')[18].value;

                        var lblTax = $(row).find('td')[18];
                        var lblCGSTTax = $(row).find('td')[19];
                        var lblSGSTTax = $(row).find('td')[21];
                        var lblIGSTTax = $(row).find('td')[23];
                        var lastChar = TareWeight.slice(-1);
                        if (lastChar != '.') {
                            {
                                if (TareWeight >= 0) {
                                    debugger;
                                    var Tax = lblTax.innerText;
                                    var CGSTTax = lblCGSTTax.innerText;
                                    var SGSTTax = lblSGSTTax.innerText;
                                    var IGSTTax = lblIGSTTax.innerText;
                                    var GrossWeight = GrossWeightTetxbox.value;
                                    var NetWeight = GrossWeight - TareWeight;
                                    var TotalAmount = 0;
                                    if (RatePerKGTextBox != "") {
                                        TotalAmount = RatePerKGTextBox * NetWeight;
                                    }
                                    var LessDiscountAmount = 0;
                                    if (LessDiscountTextBox != "") {
                                        LessDiscountAmount = LessDiscountTextBox * TotalAmount / 100;
                                    }
                                    var APMCAmount = 0;
                                    if (APMCTextBox != "") {
                                        var TotalAmountForAPMC = parseFloat(TotalAmount) - parseFloat(LessDiscountAmount);
                                        APMCAmount = APMCTextBox * TotalAmountForAPMC / 100;
                                        // APMCAmount = APMCTextBox * TotalAmount / 100;
                                    }
                                    var PackingChargesBagAmount = 0;
                                    if (PackingChargesBagTextBox != "" && NoofBagsTextBox != "") {
                                        PackingChargesBagAmount = PackingChargesBagTextBox * NoofBagsTextBox;
                                    }
                                    var HamaliAmount = 0;
                                    if (HamaliTextBox != "") {
                                        HamaliAmount = HamaliTextBox;
                                    }
                                    var InsuranceAmount = 0;
                                    if (InsuranceTextBox != "") {
                                        InsuranceAmount = InsuranceTextBox;
                                    }
                                    var TransportInwardAmount = 0;
                                    if (TransportInwardTextBox != "") {
                                        TransportInwardAmount = TransportInwardTextBox;
                                    }

                                    var TDSTax = 0;
                                    if (TDSTaxTextBox != "") {
                                        TDSTax = TDSTaxTextBox;
                                    }

                                    $(end).closest('tr').find('td').each(function (index, td) {
                                        if (index == 7) {
                                            td.innerText = parseFloat(NetWeight).toFixed(2);
                                        }
                                        else if (index == 9) {
                                            td.innerText = TotalAmount.toFixed(2)
                                        }
                                        else if (index == 12) {
                                            td.innerText = PackingChargesBagAmount.toFixed(2);
                                        }
                                        else if (index == 14) {
                                            td.innerText = LessDiscountAmount.toFixed(2);
                                        }
                                        else if (index == 16) {
                                            $(this).closest('tr').find("input")[10].value = APMCAmount.toFixed(2);
                                        }
                                        else if (index == 17) {
                                            td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        }
                                        else if (index == 20) {
                                            if (CGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 22) {
                                            if (SGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 24) {
                                            if (IGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                                td.innerText = (TotalTaxAmt);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 25) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 26) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 27) {
                                            $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                        }
                                        else if (index == 28) {
                                            $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                        }
                                        else if (index == 29) {
                                            $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                        }

                                        else if (index == 30) {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }

                                        else if (index == 31) {
                                            var textbox = $(end).closest('tr').find('input')[17];
                                            textbox.value = "0";
                                        }
                                        else if (index == 32) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }



                                        else if (index == 33) {
                                            $(this).closest('tr').find("input")[18].value = TDSTax;
                                        }
                                        else if (index == 34) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 35) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }

                                    });
                                }
                                //else {
                                //    var textbox = $(this).closest('tr').find('input')[1];
                                //    textbox.value = '';
                                //}
                            }
                        }
                    }
                });

                $(".RatePerKG").on('input propertychange paste keypress', function (e) {
                    var end = this;
                    debugger;
                    if (this.value != '') {
                        var RatePerKG = this.value;
                        if (RatePerKG != "0") {
                            var row = $(this).closest('tr');
                            var lblNetWeight = $(row).find('td')[7];
                            var NoofBagsTextBox = $(row).find('input')[2].value;
                            var PackingChargesBagTextBox = $(row).find('input')[7].value;
                            var LessDiscountTextBox = $(row).find('input')[8].value;
                            var APMCTextBox = $(row).find('input')[9].value;
                            var HamaliTextBox = $(row).find('input')[11].value;
                            var InsuranceTextBox = $(row).find('input')[12].value;
                            var TransportInwardTextBox = $(row).find('input')[13].value;

                            var TDSTaxTextBox = $(row).find('input')[18].value;

                            var lblTax = $(row).find('td')[18];
                            var lblCGSTTax = $(row).find('td')[19];
                            var lblSGSTTax = $(row).find('td')[21];
                            var lblIGSTTax = $(row).find('td')[23];
                            var lastChar = RatePerKG.slice(-1);
                            if (lastChar != '.') {
                                {
                                    if (RatePerKG > 0) {
                                        debugger;
                                        var Tax = lblTax.innerText;
                                        var CGSTTax = lblCGSTTax.innerText;
                                        var SGSTTax = lblSGSTTax.innerText;
                                        var IGSTTax = lblIGSTTax.innerText;
                                        var NetWeight = lblNetWeight.innerText;
                                        var TotalAmount = NetWeight * RatePerKG;
                                        var LessDiscountAmount = 0;
                                        if (LessDiscountTextBox != "") {
                                            LessDiscountAmount = LessDiscountTextBox * TotalAmount / 100;
                                        }
                                        var APMCAmount = 0;
                                        if (APMCTextBox != "") {
                                            var TotalAmountForAPMC = parseFloat(TotalAmount) - parseFloat(LessDiscountAmount);
                                            APMCAmount = APMCTextBox * TotalAmountForAPMC / 100;
                                            //APMCAmount = APMCTextBox * TotalAmount / 100;
                                        }
                                        var PackingChargesBagAmount = 0;
                                        if (PackingChargesBagTextBox != "" && NoofBagsTextBox != "") {
                                            PackingChargesBagAmount = PackingChargesBagTextBox * NoofBagsTextBox;
                                        }
                                        var HamaliAmount = 0;
                                        if (HamaliTextBox != "") {
                                            HamaliAmount = HamaliTextBox;
                                        }
                                        var InsuranceAmount = 0;
                                        if (InsuranceTextBox != "") {
                                            InsuranceAmount = InsuranceTextBox;
                                        }
                                        var TransportInwardAmount = 0;
                                        if (TransportInwardTextBox != "") {
                                            TransportInwardAmount = TransportInwardTextBox;
                                        }

                                        var TDSTax = 0;
                                        if (TDSTaxTextBox != "") {
                                            TDSTax = TDSTaxTextBox;
                                        }

                                        $(end).closest('tr').find('td').each(function (index, td) {
                                            if (index == 9) {
                                                td.innerText = parseFloat(TotalAmount).toFixed(2);
                                            }
                                            else if (index == 12) {
                                                td.innerText = PackingChargesBagAmount.toFixed(2);
                                            }
                                            else if (index == 14) {
                                                td.innerText = LessDiscountAmount;
                                            }
                                            else if (index == 16) {
                                                $(this).closest('tr').find("input")[10].value = APMCAmount.toFixed(2);
                                            }
                                            else if (index == 17) {
                                                td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                            }
                                            else if (index == 20) {
                                                if (CGSTTax != 0) {
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }
                                            else if (index == 22) {
                                                if (SGSTTax != 0) {
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }
                                            else if (index == 24) {
                                                if (IGSTTax != 0) {
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                                    td.innerText = (TotalTaxAmt);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }
                                            else if (index == 25) {
                                                if (TotalAmount != 0 && TotalAmount != "") {
                                                    td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }
                                            else if (index == 26) {
                                                if (TotalAmount != 0 && TotalAmount != "") {
                                                    var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }
                                            else if (index == 27) {
                                                $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                            }
                                            else if (index == 28) {
                                                $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                            }
                                            else if (index == 29) {
                                                $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                            }

                                            else if (index == 30) {
                                                var textbox = $(end).closest('tr').find('input')[16];
                                                textbox.value = "0";
                                            }

                                            else if (index == 31) {
                                                var textbox = $(end).closest('tr').find('input')[17];
                                                textbox.value = "0";
                                            }
                                            else if (index == 32) {
                                                if (TotalAmount != 0 && TotalAmount != "") {
                                                    var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }



                                            else if (index == 33) {
                                                $(this).closest('tr').find("input")[18].value = TDSTax;
                                            }
                                            else if (index == 34) {
                                                if (TotalAmount != 0 && TotalAmount != "") {
                                                    var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                    var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                    td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }
                                            else if (index == 35) {
                                                if (TotalAmount != 0 && TotalAmount != "") {
                                                    var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                    var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                    td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }

                                        });
                                    }
                                    //else {
                                    //    var textbox = $(this).closest('tr').find('input')[1];
                                    //    textbox.value = '';
                                    //}
                                }
                            }
                        }
                        else {
                            var row = $(this).closest('tr');
                            var lblNetWeight = $(row).find('td')[7];
                            var NetWeight = lblNetWeight.innerText;
                            var TotalAmount = NetWeight * RatePerKG;

                            $(end).closest('tr').find('td').each(function (index, td) {
                                if (index == 9) {
                                    td.innerText = parseFloat(TotalAmount).toFixed(2);
                                }
                                else if (index == 10) {
                                    var textbox = $(end).closest('tr').find('input')[6];
                                    textbox.value = "";
                                }
                                else if (index == 11) {
                                    var textbox = $(end).closest('tr').find('input')[7];
                                    textbox.value = "";
                                }
                                else if (index == 12) {
                                    td.innerText = "0.00";
                                }
                                else if (index == 13) {
                                    var textbox = $(end).closest('tr').find('input')[8];
                                    textbox.value = "";
                                }
                                else if (index == 14) {
                                    td.innerText = "0.00";
                                }
                                else if (index == 15) {
                                    var textbox = $(end).closest('tr').find('input')[9];
                                    textbox.value = "";
                                }
                                else if (index == 16) {
                                    var textbox = $(end).closest('tr').find('input')[10];
                                    textbox.value = "";
                                }
                                else if (index == 17) {
                                    td.innerText = "0.00";
                                }
                                else if (index == 20) {
                                    td.innerText = "0.00";
                                }
                                else if (index == 22) {
                                    td.innerText = "0.00";
                                }
                                else if (index == 24) {
                                    td.innerText = "0.00";
                                }
                                else if (index == 25) {
                                    td.innerText = "0.00";
                                }
                                else if (index == 26) {
                                    td.innerText = "0.00";
                                }
                                else if (index == 27) {
                                    var textbox = $(end).closest('tr').find('input')[11];
                                    textbox.value = "0";
                                }
                                else if (index == 28) {
                                    var textbox = $(end).closest('tr').find('input')[12];
                                    textbox.value = "0";
                                }
                                else if (index == 29) {
                                    var textbox = $(end).closest('tr').find('input')[13];
                                    textbox.value = "0";
                                }

                                else if (index == 30) {
                                    var textbox = $(end).closest('tr').find('input')[16];
                                    textbox.value = "0";
                                }
                                else if (index == 31) {
                                    var textbox = $(end).closest('tr').find('input')[17];
                                    textbox.value = "0";
                                }
                                else if (index == 32) {
                                    td.innerText = "0.00";
                                }
                                else if (index == 33) {
                                    var textbox = $(end).closest('tr').find('input')[18];
                                    textbox.value = "0";
                                }
                                else if (index == 34) {
                                    td.innerText = "0.00";
                                }
                                else if (index == 35) {
                                    td.innerText = "0.00";
                                }
                            });
                        }
                    }
                });

                $(".RatePerBags").on('input propertychange paste keypress', function (e) {
                    var end = this;
                    debugger;
                    if (this.value != '') {
                        var RatePerBags = this.value;
                        var row = $(this).closest('tr');
                        var NoofBagsTextBox = $(row).find('input')[2].value;
                        var RatePerKGTextBox = $(row).find('input')[5].value;
                        var PackingChargesBagTextBox = $(row).find('input')[7].value;
                        var LessDiscountTextBox = $(row).find('input')[8].value;
                        var APMCTextBox = $(row).find('input')[9].value;
                        var HamaliTextBox = $(row).find('input')[11].value;
                        var InsuranceTextBox = $(row).find('input')[12].value;
                        var TransportInwardTextBox = $(row).find('input')[13].value;

                        var TDSTaxTextBox = $(row).find('input')[18].value;

                        var lblTax = $(row).find('td')[18];
                        var lblCGSTTax = $(row).find('td')[19];
                        var lblSGSTTax = $(row).find('td')[21];
                        var lblIGSTTax = $(row).find('td')[23];
                        if (RatePerKGTextBox == "0" || RatePerKGTextBox == "0.0000") {
                            var lastChar = RatePerBags.slice(-1);
                            if (lastChar != '.') {
                                {
                                    if (RatePerBags > 0) {
                                        debugger;
                                        var Tax = lblTax.innerText;
                                        var CGSTTax = lblCGSTTax.innerText;
                                        var SGSTTax = lblSGSTTax.innerText;
                                        var IGSTTax = lblIGSTTax.innerText;
                                        // var NetWeight = lblNetWeight.innerText;
                                        var TotalAmount = RatePerBags * NoofBagsTextBox;
                                        var LessDiscountAmount = 0;
                                        if (LessDiscountTextBox != "") {
                                            LessDiscountAmount = LessDiscountTextBox * TotalAmount / 100;
                                        }
                                        var APMCAmount = 0;
                                        if (APMCTextBox != "") {
                                            var TotalAmountForAPMC = parseFloat(TotalAmount) - parseFloat(LessDiscountAmount);
                                            APMCAmount = APMCTextBox * TotalAmountForAPMC / 100;
                                            //APMCAmount = APMCTextBox * TotalAmount / 100;
                                        }
                                        var PackingChargesBagAmount = 0;
                                        if (PackingChargesBagTextBox != "" && NoofBagsTextBox != "") {
                                            PackingChargesBagAmount = PackingChargesBagTextBox * NoofBagsTextBox;
                                        }
                                        var HamaliAmount = 0;
                                        if (HamaliTextBox != "") {
                                            HamaliAmount = HamaliTextBox;
                                        }
                                        var InsuranceAmount = 0;
                                        if (InsuranceTextBox != "") {
                                            InsuranceAmount = InsuranceTextBox;
                                        }
                                        var TransportInwardAmount = 0;
                                        if (TransportInwardTextBox != "") {
                                            TransportInwardAmount = TransportInwardTextBox;
                                        }

                                        var TDSTax = 0;
                                        if (TDSTaxTextBox != "") {
                                            TDSTax = TDSTaxTextBox;
                                        }

                                        $(end).closest('tr').find('td').each(function (index, td) {
                                            if (index == 9) {
                                                td.innerText = parseFloat(TotalAmount).toFixed(2);
                                            }
                                            else if (index == 12) {
                                                td.innerText = PackingChargesBagAmount.toFixed(2);
                                            }
                                            else if (index == 14) {
                                                td.innerText = LessDiscountAmount;
                                            }
                                            else if (index == 16) {
                                                $(this).closest('tr').find("input")[10].value = APMCAmount.toFixed(2);
                                            }
                                            else if (index == 17) {
                                                td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                            }
                                            else if (index == 20) {
                                                if (CGSTTax != 0) {
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }
                                            else if (index == 22) {
                                                if (SGSTTax != 0) {
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }
                                            else if (index == 24) {
                                                if (IGSTTax != 0) {
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                                    td.innerText = (TotalTaxAmt);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }
                                            else if (index == 25) {
                                                if (TotalAmount != 0 && TotalAmount != "") {
                                                    td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }
                                            else if (index == 26) {
                                                if (TotalAmount != 0 && TotalAmount != "") {
                                                    var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }
                                            else if (index == 27) {
                                                $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                            }
                                            else if (index == 28) {
                                                $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                            }
                                            else if (index == 29) {
                                                $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                            }

                                            else if (index == 30) {
                                                var textbox = $(end).closest('tr').find('input')[16];
                                                textbox.value = "0";
                                            }

                                            else if (index == 31) {
                                                var textbox = $(end).closest('tr').find('input')[17];
                                                textbox.value = "0";
                                            }
                                            else if (index == 32) {
                                                if (TotalAmount != 0 && TotalAmount != "") {
                                                    var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }


                                            else if (index == 33) {
                                                $(this).closest('tr').find("input")[18].value = TDSTax;
                                            }
                                            else if (index == 34) {
                                                if (TotalAmount != 0 && TotalAmount != "") {
                                                    var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                    var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                    td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }
                                            else if (index == 35) {
                                                if (TotalAmount != 0 && TotalAmount != "") {
                                                    var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                    var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                    var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                    var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                    td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                                }
                                                else {
                                                    td.innerText = 0;
                                                }
                                            }

                                        });
                                    }
                                    //else {
                                    //    var textbox = $(this).closest('tr').find('input')[1];
                                    //    textbox.value = '';
                                    //}
                                }
                            }
                        }
                    }
                });

                $(".PackingChargesBag").on('input propertychange paste keypress', function (e) {
                    var end = this;
                    debugger;
                    if (this.value != '') {
                        var PackingChargesBag = this.value;
                        var row = $(this).closest('tr');
                        var lblTotalAmount = $(row).find('td')[9];
                        var NoofBagsTextBox = $(row).find('input')[2];
                        // var PackingChargesBagTextBox = $(row).find('input')[7].value;
                        var LessDiscountTextBox = $(row).find('input')[8].value;
                        var APMCTextBox = $(row).find('input')[9].value;
                        var HamaliTextBox = $(row).find('input')[11].value;
                        var InsuranceTextBox = $(row).find('input')[12].value;
                        var TransportInwardTextBox = $(row).find('input')[13].value;

                        var TDSTaxTextBox = $(row).find('input')[18].value;

                        var lblTax = $(row).find('td')[18];
                        var lblCGSTTax = $(row).find('td')[19];
                        var lblSGSTTax = $(row).find('td')[21];
                        var lblIGSTTax = $(row).find('td')[23];
                        var lastChar = PackingChargesBag.slice(-1);
                        if (lastChar != '.') {
                            {
                                if (PackingChargesBag >= 0) {
                                    debugger;
                                    var Tax = lblTax.innerText;
                                    var CGSTTax = lblCGSTTax.innerText;
                                    var SGSTTax = lblSGSTTax.innerText;
                                    var IGSTTax = lblIGSTTax.innerText;
                                    var TotalAmount = lblTotalAmount.innerText;
                                    var NoofBags = NoofBagsTextBox.value;
                                    var PackingChargesBagAmount = NoofBags * PackingChargesBag;
                                    var LessDiscountAmount = 0;
                                    if (LessDiscountTextBox != "") {
                                        LessDiscountAmount = LessDiscountTextBox * TotalAmount / 100;
                                    }
                                    var APMCAmount = 0;
                                    if (APMCTextBox != "") {
                                        var TotalAmountForAPMC = parseFloat(TotalAmount) - parseFloat(LessDiscountAmount);
                                        APMCAmount = APMCTextBox * TotalAmountForAPMC / 100;
                                        //APMCAmount = APMCTextBox * TotalAmount / 100;
                                    }
                                    var HamaliAmount = 0;
                                    if (HamaliTextBox != "") {
                                        HamaliAmount = HamaliTextBox;
                                    }
                                    var InsuranceAmount = 0;
                                    if (InsuranceTextBox != "") {
                                        InsuranceAmount = InsuranceTextBox;
                                    }
                                    var TransportInwardAmount = 0;
                                    if (TransportInwardTextBox != "") {
                                        TransportInwardAmount = TransportInwardTextBox;
                                    }

                                    var TDSTax = 0;
                                    if (TDSTaxTextBox != "") {
                                        TDSTax = TDSTaxTextBox;
                                    }

                                    $(end).closest('tr').find('td').each(function (index, td) {
                                        if (index == 12) {
                                            td.innerText = parseFloat(PackingChargesBagAmount).toFixed(2);
                                        }
                                        else if (index == 14) {
                                            td.innerText = LessDiscountAmount;
                                        }
                                        else if (index == 16) {
                                            $(this).closest('tr').find("input")[10].value = APMCAmount.toFixed(2);
                                        }
                                        else if (index == 17) {
                                            td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        }
                                        else if (index == 20) {
                                            if (CGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 22) {
                                            if (SGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 24) {
                                            if (IGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                                td.innerText = (TotalTaxAmt);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 25) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 26) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 27) {
                                            $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                        }
                                        else if (index == 28) {
                                            $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                        }
                                        else if (index == 29) {
                                            $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                        }

                                        else if (index == 30) {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }

                                        else if (index == 31) {
                                            var textbox = $(end).closest('tr').find('input')[17];
                                            textbox.value = "0";
                                        }
                                        else if (index == 32) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }



                                        else if (index == 33) {
                                            $(this).closest('tr').find("input")[18].value = TDSTax;
                                        }
                                        else if (index == 34) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 35) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }

                                    });
                                }
                                //else {
                                //    var textbox = $(this).closest('tr').find('input')[1];
                                //    textbox.value = '';
                                //}
                            }
                        }
                    }
                });

                $(".LessDiscount").on('input propertychange paste keypress', function (e) {
                    var end = this;
                    debugger;
                    if (this.value != '') {
                        var LessDiscount = this.value;
                        var descountinpercentage = 0;
                        if (LessDiscount != '') {
                            descountinpercentage = LessDiscount / 100;
                        }
                        var row = $(this).closest('tr');
                        var lblTotalAmount = $(row).find('td')[9];
                        var lblPackingChargesBagAmount = $(row).find('td')[12];
                        var APMCTextBox = $(row).find('input')[9].value;
                        var HamaliTextBox = $(row).find('input')[11].value;
                        var InsuranceTextBox = $(row).find('input')[12].value;
                        var TransportInwardTextBox = $(row).find('input')[13].value;

                        var TDSTaxTextBox = $(row).find('input')[18].value;

                        var HamaliAmount = 0;
                        if (HamaliTextBox != "") {
                            HamaliAmount = HamaliTextBox;
                        }
                        var InsuranceAmount = 0;
                        if (InsuranceTextBox != "") {
                            InsuranceAmount = InsuranceTextBox;
                        }
                        var TransportInwardAmount = 0;
                        if (TransportInwardTextBox != "") {
                            TransportInwardAmount = TransportInwardTextBox;
                        }

                        var TDSTax = 0;
                        if (TDSTaxTextBox != "") {
                            TDSTax = TDSTaxTextBox;
                        }

                        var lblTax = $(row).find('td')[18];
                        var lblCGSTTax = $(row).find('td')[19];
                        var lblSGSTTax = $(row).find('td')[21];
                        var lblIGSTTax = $(row).find('td')[23];
                        var lastChar = LessDiscount.slice(-1);
                        if (lastChar != '.') {
                            {
                                if (LessDiscount >= 0) {
                                    debugger;
                                    var Tax = lblTax.innerText;
                                    var CGSTTax = lblCGSTTax.innerText;
                                    var SGSTTax = lblSGSTTax.innerText;
                                    var IGSTTax = lblIGSTTax.innerText;
                                    var TotalAmount = lblTotalAmount.innerText;
                                    var PackingChargesBagAmount = lblPackingChargesBagAmount.innerText;
                                    var LessDiscountAmount = descountinpercentage * TotalAmount;
                                    var APMCAmount = 0;
                                    if (APMCTextBox != "") {
                                        var TotalAmountForAPMC = parseFloat(TotalAmount) - parseFloat(LessDiscountAmount);
                                        APMCAmount = APMCTextBox * TotalAmountForAPMC / 100;
                                        // APMCAmount = APMCTextBox * TotalAmount / 100;
                                    }
                                    $(end).closest('tr').find('td').each(function (index, td) {
                                        if (index == 14) {
                                            td.innerText = parseFloat(LessDiscountAmount).toFixed(2);
                                        }

                                        else if (index == 16) {
                                            $(this).closest('tr').find("input")[10].value = APMCAmount.toFixed(2);
                                        }
                                        else if (index == 17) {
                                            td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        }
                                        else if (index == 20) {
                                            if (CGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 22) {
                                            if (SGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 24) {
                                            if (IGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                                td.innerText = (TotalTaxAmt);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 25) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 26) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 27) {
                                            $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                        }
                                        else if (index == 28) {
                                            $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                        }
                                        else if (index == 29) {
                                            $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                        }

                                        else if (index == 30) {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }

                                        else if (index == 31) {
                                            var textbox = $(end).closest('tr').find('input')[17];
                                            textbox.value = "0";
                                        }
                                        else if (index == 32) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }



                                        else if (index == 33) {
                                            $(this).closest('tr').find("input")[18].value = TDSTax;
                                        }
                                        else if (index == 34) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 35) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }

                                    });
                                }
                                //else {
                                //    var textbox = $(this).closest('tr').find('input')[1];
                                //    textbox.value = '';
                                //}
                            }
                        }
                    }
                });

                $(".APMC").on('input propertychange paste keypress', function (e) {
                    var end = this;
                    debugger;
                    if (this.value != '') {
                        var APMC = this.value;
                        var descountinpercentageapmc = 0;
                        if (APMC != '') {
                            descountinpercentageapmc = APMC / 100;
                        }
                        var row = $(this).closest('tr');
                        var lblTotalAmount = $(row).find('td')[9];
                        var lblPackingChargesBagAmount = $(row).find('td')[12];
                        var lblLessDiscountAmount = $(row).find('td')[14];
                        var HamaliTextBox = $(row).find('input')[11].value;
                        var InsuranceTextBox = $(row).find('input')[12].value;
                        var TransportInwardTextBox = $(row).find('input')[13].value;

                        var TDSTaxTextBox = $(row).find('input')[18].value;

                        var HamaliAmount = 0;
                        if (HamaliTextBox != "") {
                            HamaliAmount = HamaliTextBox;
                        }
                        var InsuranceAmount = 0;
                        if (InsuranceTextBox != "") {
                            InsuranceAmount = InsuranceTextBox;
                        }
                        var TransportInwardAmount = 0;
                        if (TransportInwardTextBox != "") {
                            TransportInwardAmount = TransportInwardTextBox;
                        }

                        var TDSTax = 0;
                        if (TDSTaxTextBox != "") {
                            TDSTax = TDSTaxTextBox;
                        }

                        var lblTax = $(row).find('td')[18];
                        var lblCGSTTax = $(row).find('td')[19];
                        var lblSGSTTax = $(row).find('td')[21];
                        var lblIGSTTax = $(row).find('td')[23];
                        var lastChar = APMC.slice(-1);
                        if (lastChar != '.') {
                            {
                                if (APMC >= 0) {
                                    debugger;
                                    var Tax = lblTax.innerText;
                                    var CGSTTax = lblCGSTTax.innerText;
                                    var SGSTTax = lblSGSTTax.innerText;
                                    var IGSTTax = lblIGSTTax.innerText;
                                    var TotalAmount = lblTotalAmount.innerText;
                                    var PackingChargesBagAmount = lblPackingChargesBagAmount.innerText;
                                    var LessDiscountAmount = lblLessDiscountAmount.innerText;
                                    var TotalAmountForAPMC = parseFloat(TotalAmount) - parseFloat(LessDiscountAmount);
                                    var APMCAmount = descountinpercentageapmc * TotalAmountForAPMC;
                                    $(end).closest('tr').find('td').each(function (index, td) {
                                        if (index == 16) {
                                            $(this).closest('tr').find("input")[10].value = APMCAmount.toFixed(2);
                                        }
                                        else if (index == 17) {
                                            td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        }
                                        else if (index == 20) {
                                            if (CGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 22) {
                                            if (SGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 24) {
                                            if (IGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                                td.innerText = (TotalTaxAmt);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 25) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 26) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 27) {
                                            $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                        }
                                        else if (index == 28) {
                                            $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                        }
                                        else if (index == 29) {
                                            $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                        }

                                        else if (index == 30) {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }

                                        else if (index == 31) {
                                            var textbox = $(end).closest('tr').find('input')[17];
                                            textbox.value = "0";
                                        }
                                        else if (index == 32) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }



                                        else if (index == 33) {
                                            $(this).closest('tr').find("input")[18].value = TDSTax;
                                        }
                                        else if (index == 34) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 35) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }

                                    });
                                }
                                //else {
                                //    var textbox = $(this).closest('tr').find('input')[1];
                                //    textbox.value = '';
                                //}
                            }
                        }
                    }
                });

                $(".APMCAmount").on('input propertychange paste keypress', function (e) {
                    var end = this;
                    debugger;
                    if (this.value != '') {
                        var APMCAmount = this.value;
                        var row = $(this).closest('tr');
                        var lblTotalAmount = $(row).find('td')[9];
                        var lblPackingChargesBagAmount = $(row).find('td')[12];
                        var lblLessDiscountAmount = $(row).find('td')[14];
                        var HamaliTextBox = $(row).find('input')[11].value;
                        var InsuranceTextBox = $(row).find('input')[12].value;
                        var TransportInwardTextBox = $(row).find('input')[13].value;

                        var TDSTaxTextBox = $(row).find('input')[18].value;

                        var HamaliAmount = 0;
                        if (HamaliTextBox != "") {
                            HamaliAmount = HamaliTextBox;
                        }
                        var InsuranceAmount = 0;
                        if (InsuranceTextBox != "") {
                            InsuranceAmount = InsuranceTextBox;
                        }
                        var TransportInwardAmount = 0;
                        if (TransportInwardTextBox != "") {
                            TransportInwardAmount = TransportInwardTextBox;
                        }

                        var TDSTax = 0;
                        if (TDSTaxTextBox != "") {
                            TDSTax = TDSTaxTextBox;
                        }

                        var lblTax = $(row).find('td')[18];
                        var lblCGSTTax = $(row).find('td')[19];
                        var lblSGSTTax = $(row).find('td')[21];
                        var lblIGSTTax = $(row).find('td')[23];
                        var lastChar = APMCAmount.slice(-1);
                        if (lastChar != '.') {
                            {
                                if (APMCAmount >= 0) {
                                    debugger;
                                    var Tax = lblTax.innerText;
                                    var CGSTTax = lblCGSTTax.innerText;
                                    var SGSTTax = lblSGSTTax.innerText;
                                    var IGSTTax = lblIGSTTax.innerText;
                                    var TotalAmount = lblTotalAmount.innerText;
                                    var PackingChargesBagAmount = lblPackingChargesBagAmount.innerText;
                                    var LessDiscountAmount = lblLessDiscountAmount.innerText;
                                    $(end).closest('tr').find('td').each(function (index, td) {
                                        if (index == 16) {
                                            $(this).closest('tr').find("input")[10].value = APMCAmount;
                                        }
                                        else if (index == 17) {
                                            td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        }
                                        else if (index == 20) {
                                            if (CGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 22) {
                                            if (SGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 24) {
                                            if (IGSTTax != 0) {
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                                td.innerText = (TotalTaxAmt);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 25) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 26) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 27) {
                                            $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                        }
                                        else if (index == 28) {
                                            $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                        }
                                        else if (index == 29) {
                                            $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                        }

                                        else if (index == 30) {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }

                                        else if (index == 31) {
                                            var textbox = $(end).closest('tr').find('input')[17];
                                            textbox.value = "0";
                                        }
                                        else if (index == 32) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }



                                        else if (index == 33) {
                                            $(this).closest('tr').find("input")[18].value = TDSTax;
                                        }
                                        else if (index == 34) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 35) {
                                            if (TotalAmount != 0 && TotalAmount != "") {
                                                var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                                var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                                var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }

                                    });
                                }
                            }
                        }
                    }
                });

                $(".Hamali").on('input propertychange paste keypress', function (e) {
                    var end = this;
                    debugger;
                    if (this.value != '') {
                        var HamaliAmount = this.value;
                        var row = $(this).closest('tr');
                        var lblTotalAmount = $(row).find('td')[26];
                        var InsuranceTextBox = $(row).find('input')[12].value;
                        var TransportInwardTextBox = $(row).find('input')[13].value;

                        var TDSTaxTextBox = $(row).find('input')[18].value;

                        var InsuranceAmount = 0;
                        if (InsuranceTextBox != "") {
                            InsuranceAmount = InsuranceTextBox;
                        }
                        var TransportInwardAmount = 0;
                        if (TransportInwardTextBox != "") {
                            TransportInwardAmount = TransportInwardTextBox;
                        }

                        var TDSTax = 0;
                        if (TDSTaxTextBox != "") {
                            TDSTax = TDSTaxTextBox;
                        }

                        var lastChar = InsuranceAmount.slice(-1);
                        if (lastChar != '.') {
                            {
                                if (InsuranceAmount >= 0) {
                                    debugger;
                                    var TotalAmount = lblTotalAmount.innerText;
                                    $(end).closest('tr').find('td').each(function (index, td) {
                                        if (index == 32) {
                                            if (InsuranceAmount >= 0 && InsuranceAmount != "") {
                                                td.innerText = (parseFloat(TotalAmount) + parseFloat(InsuranceAmount) + parseFloat(HamaliAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 30) {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }

                                        else if (index == 31) {
                                            var textbox = $(end).closest('tr').find('input')[17];
                                            textbox.value = "0";
                                        }



                                        else if (index == 33) {
                                            $(this).closest('tr').find("input")[18].value = TDSTax;
                                        }
                                        else if (index == 34) {
                                            if (InsuranceAmount >= 0 && InsuranceAmount != "") {
                                                var GrandTotalAmt = (parseFloat(TotalAmount) + parseFloat(InsuranceAmount) + parseFloat(HamaliAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 35) {
                                            if (InsuranceAmount >= 0 && InsuranceAmount != "") {
                                                var GrandTotalAmt = (parseFloat(TotalAmount) + parseFloat(InsuranceAmount) + parseFloat(HamaliAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }

                                    });
                                }
                                //else {
                                //    var textbox = $(this).closest('tr').find('input')[1];
                                //    textbox.value = '';
                                //}
                            }
                        }
                    }
                });

                $(".Insurance").on('input propertychange paste keypress', function (e) {
                    var end = this;
                    debugger;
                    if (this.value != '') {
                        var InsuranceAmount = this.value;
                        var row = $(this).closest('tr');
                        var lblTotalAmount = $(row).find('td')[26];
                        var HamaliTextBox = $(row).find('input')[11].value;
                        var TransportInwardTextBox = $(row).find('input')[13].value;

                        var TDSTaxTextBox = $(row).find('input')[18].value;

                        var TransportInwardAmount = 0;
                        if (TransportInwardTextBox != "") {
                            TransportInwardAmount = TransportInwardTextBox;
                        }
                        var HamaliAmount = 0;
                        if (HamaliTextBox != "") {
                            HamaliAmount = HamaliTextBox;
                        }

                        var TDSTax = 0;
                        if (TDSTaxTextBox != "") {
                            TDSTax = TDSTaxTextBox;
                        }

                        var lastChar = InsuranceAmount.slice(-1);
                        if (lastChar != '.') {
                            {
                                if (InsuranceAmount >= 0) {
                                    debugger;
                                    var TotalAmount = lblTotalAmount.innerText;
                                    $(end).closest('tr').find('td').each(function (index, td) {
                                        if (index == 32) {
                                            if (InsuranceAmount >= 0 && InsuranceAmount != "") {
                                                td.innerText = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 30) {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }

                                        else if (index == 31) {
                                            var textbox = $(end).closest('tr').find('input')[17];
                                            textbox.value = "0";
                                        }




                                        else if (index == 33) {
                                            $(this).closest('tr').find("input")[18].value = TDSTax;
                                        }
                                        else if (index == 34) {
                                            if (InsuranceAmount >= 0 && InsuranceAmount != "") {
                                                var GrandTotalAmt = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 35) {
                                            if (InsuranceAmount >= 0 && InsuranceAmount != "") {
                                                var GrandTotalAmt = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }

                                    });
                                }
                                //else {
                                //    var textbox = $(this).closest('tr').find('input')[1];
                                //    textbox.value = '';
                                //}
                            }
                        }
                    }
                });

                $(".TransportInward").on('input propertychange paste keypress', function (e) {
                    var end = this;
                    debugger;
                    if (this.value != '') {
                        var TransportInwardAmount = this.value;
                        var row = $(this).closest('tr');
                        var lblTotalAmount = $(row).find('td')[26];
                        var HamaliTextBox = $(row).find('input')[11].value;
                        var InsuranceTextBox = $(row).find('input')[12].value;

                        var TDSTaxTextBox = $(row).find('input')[18].value;

                        var InsuranceAmount = 0;
                        if (InsuranceTextBox != "") {
                            InsuranceAmount = InsuranceTextBox;
                        }
                        var HamaliAmount = 0;
                        if (HamaliTextBox != "") {
                            HamaliAmount = HamaliTextBox;
                        }

                        var TDSTax = 0;
                        if (TDSTaxTextBox != "") {
                            TDSTax = TDSTaxTextBox;
                        }

                        var lastChar = TransportInwardAmount.slice(-1);
                        if (lastChar != '.') {
                            {
                                if (TransportInwardAmount >= 0) {
                                    debugger;
                                    var TotalAmount = lblTotalAmount.innerText;
                                    $(end).closest('tr').find('td').each(function (index, td) {
                                        if (index == 32) {
                                            if (TransportInwardAmount >= 0 && TransportInwardAmount != "") {
                                                td.innerText = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        else if (index == 30) {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }
                                        else if (index == 31) {
                                            var textbox = $(end).closest('tr').find('input')[17];
                                            textbox.value = "0";
                                        }



                                        else if (index == 33) {
                                            $(this).closest('tr').find("input")[18].value = TDSTax;
                                        }
                                        if (index == 34) {
                                            if (TransportInwardAmount >= 0 && TransportInwardAmount != "") {
                                                var GrandTotalAmt = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }
                                        if (index == 35) {
                                            if (TransportInwardAmount >= 0 && TransportInwardAmount != "") {
                                                var GrandTotalAmt = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                                var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                            }
                                            else {
                                                td.innerText = 0;
                                            }
                                        }


                                    });
                                }
                                //else {
                                //    var textbox = $(this).closest('tr').find('input')[1];
                                //    textbox.value = '';
                                //}
                            }
                        }
                    }
                });

                $(".TCSAmount").on('input propertychange paste keypress', function (e) {
                    var end = this;
                    debugger;
                    if (this.value != '') {
                        var TCSAmount = this.value;
                        var row = $(this).closest('tr');
                        var lblTotalAmount = $(row).find('td')[26];
                        var HamaliTextBox = $(row).find('input')[11].value;
                        var InsuranceTextBox = $(row).find('input')[12].value;
                        var TransportInwardTextBox = $(row).find('input')[13].value;

                        var TDSTaxTextBox = $(row).find('input')[18].value;

                        var InsuranceAmount = 0;
                        if (InsuranceTextBox != "") {
                            InsuranceAmount = InsuranceTextBox;
                        }
                        var HamaliAmount = 0;
                        if (HamaliTextBox != "") {
                            HamaliAmount = HamaliTextBox;
                        }
                        var TransportInwardAmount = 0;
                        if (TransportInwardTextBox != "") {
                            TransportInwardAmount = TransportInwardTextBox;
                        }

                        var TDSTax = 0;
                        if (TDSTaxTextBox != "") {
                            TDSTax = TDSTaxTextBox;
                        }

                        var lastChar = TCSAmount.slice(-1);
                        if (lastChar != '.') {
                            {
                                if (TCSAmount != '') {
                                    debugger;
                                    var TotalAmount = lblTotalAmount.innerText;
                                    var GrandTotalAmount = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                    $(end).closest('tr').find('td').each(function (index, td) {
                                        if (TCSAmount != 0) {
                                            if (index == 32) {
                                                if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                                    td.innerText = (parseFloat(GrandTotalAmount) + parseFloat(TCSAmount)).toFixed(2);
                                                }
                                                else {
                                                    var textbox = $(end).closest('tr').find('input')[16];
                                                    textbox.value = "0";
                                                }
                                            }


                                            else if (index == 33) {
                                                $(this).closest('tr').find("input")[18].value = TDSTax;
                                            }
                                            else if (index == 34) {
                                                if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                                    var GrandTotalAmt = (parseFloat(GrandTotalAmount) + parseFloat(TCSAmount)).toFixed(2);
                                                    var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                    td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                                }
                                                else {
                                                    var textbox = $(end).closest('tr').find('input')[16];
                                                    textbox.value = "0";
                                                }
                                            }
                                            else if (index == 35) {
                                                if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                                    var GrandTotalAmt = (parseFloat(GrandTotalAmount) + parseFloat(TCSAmount)).toFixed(2);
                                                    var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                    td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                                }
                                                else {
                                                    var textbox = $(end).closest('tr').find('input')[16];
                                                    textbox.value = "0";
                                                }
                                            }

                                        }
                                        else {
                                            if (index == 32) {
                                                if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                                    td.innerText = (parseFloat(GrandTotalAmount)).toFixed(2);
                                                }
                                                else {
                                                    var textbox = $(end).closest('tr').find('input')[16];
                                                    textbox.value = "0";
                                                }
                                            }


                                            else if (index == 33) {
                                                $(this).closest('tr').find("input")[18].value = TDSTax;
                                            }
                                            if (index == 34) {
                                                if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                                    var GrandTotalAmt = (parseFloat(GrandTotalAmount)).toFixed(2);
                                                    var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                    td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                                }
                                                else {
                                                    var textbox = $(end).closest('tr').find('input')[16];
                                                    textbox.value = "0";
                                                }
                                            }
                                            if (index == 35) {
                                                if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                                    var GrandTotalAmt = (parseFloat(GrandTotalAmount)).toFixed(2);
                                                    var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                    td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                                }
                                                else {
                                                    var textbox = $(end).closest('tr').find('input')[16];
                                                    textbox.value = "0";
                                                }
                                            }

                                        }
                                    });
                                }
                            }
                        }
                    }
                });

                $(".RoundOff").on('input propertychange paste keypress', function (e) {
                    var end = this;
                    debugger;
                    if (this.value != '') {
                        var RoundOff = this.value;
                        var row = $(this).closest('tr');
                        var lblTotalAmount = $(row).find('td')[26];
                        var HamaliTextBox = $(row).find('input')[11].value;
                        var InsuranceTextBox = $(row).find('input')[12].value;
                        var TransportInwardTextBox = $(row).find('input')[13].value;
                        var TCSAmountTextBox = $(row).find('input')[16].value;

                        var TDSTaxTextBox = $(row).find('input')[18].value;

                        var InsuranceAmount = 0;
                        if (InsuranceTextBox != "") {
                            InsuranceAmount = InsuranceTextBox;
                        }
                        var HamaliAmount = 0;
                        if (HamaliTextBox != "") {
                            HamaliAmount = HamaliTextBox;
                        }
                        var TransportInwardAmount = 0;
                        if (TransportInwardTextBox != "") {
                            TransportInwardAmount = TransportInwardTextBox;
                        }
                        var TCSAmount = 0;
                        if (TCSAmountTextBox != "") {
                            TCSAmount = TCSAmountTextBox;
                        }

                        var TDSTax = 0;
                        if (TDSTaxTextBox != "") {
                            TDSTax = TDSTaxTextBox;
                        }

                        var lastChar = RoundOff.slice(-1);
                        if (lastChar != '.') {
                            {
                                if (RoundOff != '') {
                                    debugger;
                                    var TotalAmount = lblTotalAmount.innerText;
                                    var GrandTotalAmount = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount) + parseFloat(TCSAmount)).toFixed(2);
                                    $(end).closest('tr').find('td').each(function (index, td) {

                                        if (RoundOff != 0) {
                                            if (index == 32) {
                                                if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                                    td.innerText = (parseFloat(GrandTotalAmount) + parseFloat(RoundOff)).toFixed(2);
                                                }
                                                else {
                                                    var textbox = $(end).closest('tr').find('input')[16];
                                                    textbox.value = "0";
                                                }
                                            }



                                            else if (index == 33) {
                                                $(this).closest('tr').find("input")[18].value = TDSTax;
                                            }
                                            else if (index == 34) {
                                                if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                                    var GrandTotalAmt = (parseFloat(GrandTotalAmount) + parseFloat(RoundOff)).toFixed(2);
                                                    var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                    td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                                }
                                                else {
                                                    var textbox = $(end).closest('tr').find('input')[16];
                                                    textbox.value = "0";
                                                }
                                            }
                                            else if (index == 35) {
                                                if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                                    var GrandTotalAmt = (parseFloat(GrandTotalAmount) + parseFloat(RoundOff)).toFixed(2);
                                                    var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                    td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                                }
                                                else {
                                                    var textbox = $(end).closest('tr').find('input')[16];
                                                    textbox.value = "0";
                                                }
                                            }

                                        }
                                        else {
                                            if (index == 32) {
                                                if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                                    td.innerText = (parseFloat(GrandTotalAmount)).toFixed(2);
                                                }
                                                else {
                                                    var textbox = $(end).closest('tr').find('input')[16];
                                                    textbox.value = "0";
                                                }
                                            }




                                            else if (index == 33) {
                                                $(this).closest('tr').find("input")[18].value = TDSTax;
                                            }
                                            else if (index == 34) {
                                                if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                                    var GrandTotalAmt = (parseFloat(GrandTotalAmount)).toFixed(2);
                                                    var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                    td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                                }
                                                else {
                                                    var textbox = $(end).closest('tr').find('input')[16];
                                                    textbox.value = "0";
                                                }
                                            }
                                            else if (index == 35) {
                                                if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                                    var GrandTotalAmt = (parseFloat(GrandTotalAmount)).toFixed(2);
                                                    var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                                    td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                                }
                                                else {
                                                    var textbox = $(end).closest('tr').find('input')[16];
                                                    textbox.value = "0";
                                                }
                                            }

                                        }
                                    });
                                }
                            }
                        }
                    }
                });

                // Dynamic Table Value

            }
        })

            //.on('click', '.removeButton', function () {
            //    var $row = $(this).parents('.form-group'),
            //        index = $row.attr('data-book-index');
            //    $row.remove();
            //    var i = 1;
            //    $('#PurchaseQty').children('tbody').children('tr:visible').each(function (index, row) {
            //        if (index != ($('#PurchaseQty').children('tbody').children('tr:visible').length)) {
            //            $(row).find("td")[0].innerText = i++;
            //        }
            //    });
            //});

        .on('click', '.removeButton', function () {
            var $row = $(this).parents('.form-group'),
                index = $row.attr('data-book-index');
            $row.remove();
            var i = 1;
            $('#PurchaseQty').children('tbody').children('tr:visible').each(function (index, row) {
                if (index != ($('#PurchaseQty').children('tbody').children('tr:visible').length - 1)) {
                    $(row).find("td")[0].innerText = i++;
                }
            });
        });


        $(".TareWeight").on('input propertychange paste keypress', function (e) {
            var end = this;
            debugger;
            if (this.value != '') {
                var TareWeight = this.value;
                var row = $(this).closest('tr');
                var NoofBagsTextBox = $(row).find('input')[2].value;
                var GrossWeightTetxbox = $(row).find('input')[3];
                var RatePerKGTextBox = $(row).find('input')[5].value;
                var PackingChargesBagTextBox = $(row).find('input')[7].value;
                var LessDiscountTextBox = $(row).find('input')[8].value;
                var APMCTextBox = $(row).find('input')[9].value;
                var HamaliTextBox = $(row).find('input')[11].value;
                var InsuranceTextBox = $(row).find('input')[12].value;
                var TransportInwardTextBox = $(row).find('input')[13].value;

                var TDSTaxTextBox = $(row).find('input')[18].value;

                var lblTax = $(row).find('td')[18];
                var lblCGSTTax = $(row).find('td')[19];
                var lblSGSTTax = $(row).find('td')[21];
                var lblIGSTTax = $(row).find('td')[23];
                var lastChar = TareWeight.slice(-1);
                if (lastChar != '.') {
                    {
                        if (TareWeight >= 0) {
                            debugger;
                            var Tax = lblTax.innerText;
                            var CGSTTax = lblCGSTTax.innerText;
                            var SGSTTax = lblSGSTTax.innerText;
                            var IGSTTax = lblIGSTTax.innerText;
                            var GrossWeight = GrossWeightTetxbox.value;
                            var NetWeight = GrossWeight - TareWeight;
                            var TotalAmount = 0;
                            if (RatePerKGTextBox != "") {
                                TotalAmount = RatePerKGTextBox * NetWeight;
                            }
                            var LessDiscountAmount = 0;
                            if (LessDiscountTextBox != "") {
                                LessDiscountAmount = LessDiscountTextBox * TotalAmount / 100;
                            }
                            var APMCAmount = 0;
                            if (APMCTextBox != "") {
                                var TotalAmountForAPMC = parseFloat(TotalAmount) - parseFloat(LessDiscountAmount);
                                APMCAmount = APMCTextBox * TotalAmountForAPMC / 100;
                                // APMCAmount = APMCTextBox * TotalAmount / 100;
                            }
                            var PackingChargesBagAmount = 0;
                            if (PackingChargesBagTextBox != "" && NoofBagsTextBox != "") {
                                PackingChargesBagAmount = PackingChargesBagTextBox * NoofBagsTextBox;
                            }
                            var HamaliAmount = 0;
                            if (HamaliTextBox != "") {
                                HamaliAmount = HamaliTextBox;
                            }
                            var InsuranceAmount = 0;
                            if (InsuranceTextBox != "") {
                                InsuranceAmount = InsuranceTextBox;
                            }
                            var TransportInwardAmount = 0;
                            if (TransportInwardTextBox != "") {
                                TransportInwardAmount = TransportInwardTextBox;
                            }

                            var TDSTax = 0;
                            if (TDSTaxTextBox != "") {
                                TDSTax = TDSTaxTextBox;
                            }

                            $(end).closest('tr').find('td').each(function (index, td) {
                                if (index == 7) {
                                    td.innerText = parseFloat(NetWeight).toFixed(2);
                                }
                                else if (index == 9) {
                                    td.innerText = TotalAmount.toFixed(2)
                                }
                                else if (index == 12) {
                                    td.innerText = PackingChargesBagAmount.toFixed(2);
                                }
                                else if (index == 14) {
                                    td.innerText = LessDiscountAmount.toFixed(2);
                                }
                                else if (index == 16) {
                                    $(this).closest('tr').find("input")[10].value = APMCAmount.toFixed(2);
                                }
                                else if (index == 17) {
                                    td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                }
                                else if (index == 20) {
                                    if (CGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 22) {
                                    if (SGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 24) {
                                    if (IGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                        td.innerText = (TotalTaxAmt);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 25) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 26) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 27) {
                                    $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                }
                                else if (index == 28) {
                                    $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                }
                                else if (index == 29) {
                                    $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                }

                                else if (index == 30) {
                                    var textbox = $(end).closest('tr').find('input')[16];
                                    textbox.value = "0";
                                }

                                else if (index == 31) {
                                    var textbox = $(end).closest('tr').find('input')[17];
                                    textbox.value = "0";
                                }
                                else if (index == 32) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }



                                else if (index == 33) {
                                    $(this).closest('tr').find("input")[18].value = TDSTax;
                                }
                                else if (index == 34) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 35) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }

                            });
                        }
                        //else {
                        //    var textbox = $(this).closest('tr').find('input')[1];
                        //    textbox.value = '';
                        //}
                    }
                }
            }
        });

        $(".RatePerKG").on('input propertychange paste keypress', function (e) {
            var end = this;
            debugger;
            if (this.value != '') {
                var RatePerKG = this.value;
                if (RatePerKG != "0") {
                    var row = $(this).closest('tr');
                    var lblNetWeight = $(row).find('td')[7];
                    var NoofBagsTextBox = $(row).find('input')[2].value;
                    var PackingChargesBagTextBox = $(row).find('input')[7].value;
                    var LessDiscountTextBox = $(row).find('input')[8].value;
                    var APMCTextBox = $(row).find('input')[9].value;
                    var HamaliTextBox = $(row).find('input')[11].value;
                    var InsuranceTextBox = $(row).find('input')[12].value;
                    var TransportInwardTextBox = $(row).find('input')[13].value;

                    var TDSTaxTextBox = $(row).find('input')[18].value;

                    var lblTax = $(row).find('td')[18];
                    var lblCGSTTax = $(row).find('td')[19];
                    var lblSGSTTax = $(row).find('td')[21];
                    var lblIGSTTax = $(row).find('td')[23];
                    var lastChar = RatePerKG.slice(-1);
                    if (lastChar != '.') {
                        {
                            if (RatePerKG > 0) {
                                debugger;
                                var Tax = lblTax.innerText;
                                var CGSTTax = lblCGSTTax.innerText;
                                var SGSTTax = lblSGSTTax.innerText;
                                var IGSTTax = lblIGSTTax.innerText;
                                var NetWeight = lblNetWeight.innerText;
                                var TotalAmount = NetWeight * RatePerKG;
                                var LessDiscountAmount = 0;
                                if (LessDiscountTextBox != "") {
                                    LessDiscountAmount = LessDiscountTextBox * TotalAmount / 100;
                                }
                                var APMCAmount = 0;
                                if (APMCTextBox != "") {
                                    var TotalAmountForAPMC = parseFloat(TotalAmount) - parseFloat(LessDiscountAmount);
                                    APMCAmount = APMCTextBox * TotalAmountForAPMC / 100;
                                    //APMCAmount = APMCTextBox * TotalAmount / 100;
                                }
                                var PackingChargesBagAmount = 0;
                                if (PackingChargesBagTextBox != "" && NoofBagsTextBox != "") {
                                    PackingChargesBagAmount = PackingChargesBagTextBox * NoofBagsTextBox;
                                }
                                var HamaliAmount = 0;
                                if (HamaliTextBox != "") {
                                    HamaliAmount = HamaliTextBox;
                                }
                                var InsuranceAmount = 0;
                                if (InsuranceTextBox != "") {
                                    InsuranceAmount = InsuranceTextBox;
                                }
                                var TransportInwardAmount = 0;
                                if (TransportInwardTextBox != "") {
                                    TransportInwardAmount = TransportInwardTextBox;
                                }

                                var TDSTax = 0;
                                if (TDSTaxTextBox != "") {
                                    TDSTax = TDSTaxTextBox;
                                }

                                $(end).closest('tr').find('td').each(function (index, td) {
                                    if (index == 9) {
                                        td.innerText = parseFloat(TotalAmount).toFixed(2);
                                    }
                                    else if (index == 12) {
                                        td.innerText = PackingChargesBagAmount.toFixed(2);
                                    }
                                    else if (index == 14) {
                                        td.innerText = LessDiscountAmount;
                                    }
                                    else if (index == 16) {
                                        $(this).closest('tr').find("input")[10].value = APMCAmount.toFixed(2);
                                    }
                                    else if (index == 17) {
                                        td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                    }
                                    else if (index == 20) {
                                        if (CGSTTax != 0) {
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }
                                    else if (index == 22) {
                                        if (SGSTTax != 0) {
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }
                                    else if (index == 24) {
                                        if (IGSTTax != 0) {
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                            td.innerText = (TotalTaxAmt);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }
                                    else if (index == 25) {
                                        if (TotalAmount != 0 && TotalAmount != "") {
                                            td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }
                                    else if (index == 26) {
                                        if (TotalAmount != 0 && TotalAmount != "") {
                                            var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }
                                    else if (index == 27) {
                                        $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                    }
                                    else if (index == 28) {
                                        $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                    }
                                    else if (index == 29) {
                                        $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                    }

                                    else if (index == 30) {
                                        var textbox = $(end).closest('tr').find('input')[16];
                                        textbox.value = "0";
                                    }

                                    else if (index == 31) {
                                        var textbox = $(end).closest('tr').find('input')[17];
                                        textbox.value = "0";
                                    }
                                    else if (index == 32) {
                                        if (TotalAmount != 0 && TotalAmount != "") {
                                            var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }



                                    else if (index == 33) {
                                        $(this).closest('tr').find("input")[18].value = TDSTax;
                                    }
                                    else if (index == 34) {
                                        if (TotalAmount != 0 && TotalAmount != "") {
                                            var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                            var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                            td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }
                                    else if (index == 35) {
                                        if (TotalAmount != 0 && TotalAmount != "") {
                                            var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                            var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                            td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }

                                });
                            }
                            //else {
                            //    var textbox = $(this).closest('tr').find('input')[1];
                            //    textbox.value = '';
                            //}
                        }
                    }
                }
                else {
                    var row = $(this).closest('tr');
                    var lblNetWeight = $(row).find('td')[7];
                    var NetWeight = lblNetWeight.innerText;
                    var TotalAmount = NetWeight * RatePerKG;

                    $(end).closest('tr').find('td').each(function (index, td) {
                        if (index == 9) {
                            td.innerText = parseFloat(TotalAmount).toFixed(2);
                        }
                        else if (index == 10) {
                            var textbox = $(end).closest('tr').find('input')[6];
                            textbox.value = "";
                        }
                        else if (index == 11) {
                            var textbox = $(end).closest('tr').find('input')[7];
                            textbox.value = "";
                        }
                        else if (index == 12) {
                            td.innerText = "0.00";
                        }
                        else if (index == 13) {
                            var textbox = $(end).closest('tr').find('input')[8];
                            textbox.value = "";
                        }
                        else if (index == 14) {
                            td.innerText = "0.00";
                        }
                        else if (index == 15) {
                            var textbox = $(end).closest('tr').find('input')[9];
                            textbox.value = "";
                        }
                        else if (index == 16) {
                            var textbox = $(end).closest('tr').find('input')[10];
                            textbox.value = "";
                        }
                        else if (index == 17) {
                            td.innerText = "0.00";
                        }
                        else if (index == 20) {
                            td.innerText = "0.00";
                        }
                        else if (index == 22) {
                            td.innerText = "0.00";
                        }
                        else if (index == 24) {
                            td.innerText = "0.00";
                        }
                        else if (index == 25) {
                            td.innerText = "0.00";
                        }
                        else if (index == 26) {
                            td.innerText = "0.00";
                        }
                        else if (index == 27) {
                            var textbox = $(end).closest('tr').find('input')[11];
                            textbox.value = "0";
                        }
                        else if (index == 28) {
                            var textbox = $(end).closest('tr').find('input')[12];
                            textbox.value = "0";
                        }
                        else if (index == 29) {
                            var textbox = $(end).closest('tr').find('input')[13];
                            textbox.value = "0";
                        }

                        else if (index == 30) {
                            var textbox = $(end).closest('tr').find('input')[16];
                            textbox.value = "0";
                        }
                        else if (index == 31) {
                            var textbox = $(end).closest('tr').find('input')[17];
                            textbox.value = "0";
                        }
                        else if (index == 32) {
                            td.innerText = "0.00";
                        }
                        else if (index == 33) {
                            var textbox = $(end).closest('tr').find('input')[18];
                            textbox.value = "0";
                        }
                        else if (index == 34) {
                            td.innerText = "0.00";
                        }
                        else if (index == 35) {
                            td.innerText = "0.00";
                        }
                    });
                }
            }
        });

        $(".RatePerBags").on('input propertychange paste keypress', function (e) {
            var end = this;
            debugger;
            if (this.value != '') {
                var RatePerBags = this.value;
                var row = $(this).closest('tr');
                var NoofBagsTextBox = $(row).find('input')[2].value;
                var RatePerKGTextBox = $(row).find('input')[5].value;
                var PackingChargesBagTextBox = $(row).find('input')[7].value;
                var LessDiscountTextBox = $(row).find('input')[8].value;
                var APMCTextBox = $(row).find('input')[9].value;
                var HamaliTextBox = $(row).find('input')[11].value;
                var InsuranceTextBox = $(row).find('input')[12].value;
                var TransportInwardTextBox = $(row).find('input')[13].value;

                var TDSTaxTextBox = $(row).find('input')[18].value;

                var lblTax = $(row).find('td')[18];
                var lblCGSTTax = $(row).find('td')[19];
                var lblSGSTTax = $(row).find('td')[21];
                var lblIGSTTax = $(row).find('td')[23];
                if (RatePerKGTextBox == "0" || RatePerKGTextBox == "0.0000") {
                    var lastChar = RatePerBags.slice(-1);
                    if (lastChar != '.') {
                        {
                            if (RatePerBags > 0) {
                                debugger;
                                var Tax = lblTax.innerText;
                                var CGSTTax = lblCGSTTax.innerText;
                                var SGSTTax = lblSGSTTax.innerText;
                                var IGSTTax = lblIGSTTax.innerText;
                                // var NetWeight = lblNetWeight.innerText;
                                var TotalAmount = RatePerBags * NoofBagsTextBox;
                                var LessDiscountAmount = 0;
                                if (LessDiscountTextBox != "") {
                                    LessDiscountAmount = LessDiscountTextBox * TotalAmount / 100;
                                }
                                var APMCAmount = 0;
                                if (APMCTextBox != "") {
                                    var TotalAmountForAPMC = parseFloat(TotalAmount) - parseFloat(LessDiscountAmount);
                                    APMCAmount = APMCTextBox * TotalAmountForAPMC / 100;
                                    //APMCAmount = APMCTextBox * TotalAmount / 100;
                                }
                                var PackingChargesBagAmount = 0;
                                if (PackingChargesBagTextBox != "" && NoofBagsTextBox != "") {
                                    PackingChargesBagAmount = PackingChargesBagTextBox * NoofBagsTextBox;
                                }
                                var HamaliAmount = 0;
                                if (HamaliTextBox != "") {
                                    HamaliAmount = HamaliTextBox;
                                }
                                var InsuranceAmount = 0;
                                if (InsuranceTextBox != "") {
                                    InsuranceAmount = InsuranceTextBox;
                                }
                                var TransportInwardAmount = 0;
                                if (TransportInwardTextBox != "") {
                                    TransportInwardAmount = TransportInwardTextBox;
                                }

                                var TDSTax = 0;
                                if (TDSTaxTextBox != "") {
                                    TDSTax = TDSTaxTextBox;
                                }

                                $(end).closest('tr').find('td').each(function (index, td) {
                                    if (index == 9) {
                                        td.innerText = parseFloat(TotalAmount).toFixed(2);
                                    }
                                    else if (index == 12) {
                                        td.innerText = PackingChargesBagAmount.toFixed(2);
                                    }
                                    else if (index == 14) {
                                        td.innerText = LessDiscountAmount;
                                    }
                                    else if (index == 16) {
                                        $(this).closest('tr').find("input")[10].value = APMCAmount.toFixed(2);
                                    }
                                    else if (index == 17) {
                                        td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                    }
                                    else if (index == 20) {
                                        if (CGSTTax != 0) {
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }
                                    else if (index == 22) {
                                        if (SGSTTax != 0) {
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }
                                    else if (index == 24) {
                                        if (IGSTTax != 0) {
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                            td.innerText = (TotalTaxAmt);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }
                                    else if (index == 25) {
                                        if (TotalAmount != 0 && TotalAmount != "") {
                                            td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }
                                    else if (index == 26) {
                                        if (TotalAmount != 0 && TotalAmount != "") {
                                            var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }
                                    else if (index == 27) {
                                        $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                    }
                                    else if (index == 28) {
                                        $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                    }
                                    else if (index == 29) {
                                        $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                    }

                                    else if (index == 30) {
                                        var textbox = $(end).closest('tr').find('input')[16];
                                        textbox.value = "0";
                                    }

                                    else if (index == 31) {
                                        var textbox = $(end).closest('tr').find('input')[17];
                                        textbox.value = "0";
                                    }
                                    else if (index == 32) {
                                        if (TotalAmount != 0 && TotalAmount != "") {
                                            var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }


                                    else if (index == 33) {
                                        $(this).closest('tr').find("input")[18].value = TDSTax;
                                    }
                                    else if (index == 34) {
                                        if (TotalAmount != 0 && TotalAmount != "") {
                                            var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                            var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                            td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }
                                    else if (index == 35) {
                                        if (TotalAmount != 0 && TotalAmount != "") {
                                            var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                            var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                            var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                            var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                            td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                        }
                                        else {
                                            td.innerText = 0;
                                        }
                                    }

                                });
                            }
                            //else {
                            //    var textbox = $(this).closest('tr').find('input')[1];
                            //    textbox.value = '';
                            //}
                        }
                    }
                }
            }
        });

        $(".PackingChargesBag").on('input propertychange paste keypress', function (e) {
            var end = this;
            debugger;
            if (this.value != '') {
                var PackingChargesBag = this.value;
                var row = $(this).closest('tr');
                var lblTotalAmount = $(row).find('td')[9];
                var NoofBagsTextBox = $(row).find('input')[2];
                // var PackingChargesBagTextBox = $(row).find('input')[7].value;
                var LessDiscountTextBox = $(row).find('input')[8].value;
                var APMCTextBox = $(row).find('input')[9].value;
                var HamaliTextBox = $(row).find('input')[11].value;
                var InsuranceTextBox = $(row).find('input')[12].value;
                var TransportInwardTextBox = $(row).find('input')[13].value;

                var TDSTaxTextBox = $(row).find('input')[18].value;

                var lblTax = $(row).find('td')[18];
                var lblCGSTTax = $(row).find('td')[19];
                var lblSGSTTax = $(row).find('td')[21];
                var lblIGSTTax = $(row).find('td')[23];
                var lastChar = PackingChargesBag.slice(-1);
                if (lastChar != '.') {
                    {
                        if (PackingChargesBag >= 0) {
                            debugger;
                            var Tax = lblTax.innerText;
                            var CGSTTax = lblCGSTTax.innerText;
                            var SGSTTax = lblSGSTTax.innerText;
                            var IGSTTax = lblIGSTTax.innerText;
                            var TotalAmount = lblTotalAmount.innerText;
                            var NoofBags = NoofBagsTextBox.value;
                            var PackingChargesBagAmount = NoofBags * PackingChargesBag;
                            var LessDiscountAmount = 0;
                            if (LessDiscountTextBox != "") {
                                LessDiscountAmount = LessDiscountTextBox * TotalAmount / 100;
                            }
                            var APMCAmount = 0;
                            if (APMCTextBox != "") {
                                var TotalAmountForAPMC = parseFloat(TotalAmount) - parseFloat(LessDiscountAmount);
                                APMCAmount = APMCTextBox * TotalAmountForAPMC / 100;
                                //APMCAmount = APMCTextBox * TotalAmount / 100;
                            }
                            var HamaliAmount = 0;
                            if (HamaliTextBox != "") {
                                HamaliAmount = HamaliTextBox;
                            }
                            var InsuranceAmount = 0;
                            if (InsuranceTextBox != "") {
                                InsuranceAmount = InsuranceTextBox;
                            }
                            var TransportInwardAmount = 0;
                            if (TransportInwardTextBox != "") {
                                TransportInwardAmount = TransportInwardTextBox;
                            }

                            var TDSTax = 0;
                            if (TDSTaxTextBox != "") {
                                TDSTax = TDSTaxTextBox;
                            }

                            $(end).closest('tr').find('td').each(function (index, td) {
                                if (index == 12) {
                                    td.innerText = parseFloat(PackingChargesBagAmount).toFixed(2);
                                }
                                else if (index == 14) {
                                    td.innerText = LessDiscountAmount;
                                }
                                else if (index == 16) {
                                    $(this).closest('tr').find("input")[10].value = APMCAmount.toFixed(2);
                                }
                                else if (index == 17) {
                                    td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                }
                                else if (index == 20) {
                                    if (CGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 22) {
                                    if (SGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 24) {
                                    if (IGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                        td.innerText = (TotalTaxAmt);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 25) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 26) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 27) {
                                    $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                }
                                else if (index == 28) {
                                    $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                }
                                else if (index == 29) {
                                    $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                }

                                else if (index == 30) {
                                    var textbox = $(end).closest('tr').find('input')[16];
                                    textbox.value = "0";
                                }

                                else if (index == 31) {
                                    var textbox = $(end).closest('tr').find('input')[17];
                                    textbox.value = "0";
                                }
                                else if (index == 32) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }



                                else if (index == 33) {
                                    $(this).closest('tr').find("input")[18].value = TDSTax;
                                }
                                else if (index == 34) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 35) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }

                            });
                        }
                        //else {
                        //    var textbox = $(this).closest('tr').find('input')[1];
                        //    textbox.value = '';
                        //}
                    }
                }
            }
        });

        $(".LessDiscount").on('input propertychange paste keypress', function (e) {
            var end = this;
            debugger;
            if (this.value != '') {
                var LessDiscount = this.value;
                var descountinpercentage = 0;
                if (LessDiscount != '') {
                    descountinpercentage = LessDiscount / 100;
                }
                var row = $(this).closest('tr');
                var lblTotalAmount = $(row).find('td')[9];
                var lblPackingChargesBagAmount = $(row).find('td')[12];
                var APMCTextBox = $(row).find('input')[9].value;
                var HamaliTextBox = $(row).find('input')[11].value;
                var InsuranceTextBox = $(row).find('input')[12].value;
                var TransportInwardTextBox = $(row).find('input')[13].value;

                var TDSTaxTextBox = $(row).find('input')[18].value;

                var HamaliAmount = 0;
                if (HamaliTextBox != "") {
                    HamaliAmount = HamaliTextBox;
                }
                var InsuranceAmount = 0;
                if (InsuranceTextBox != "") {
                    InsuranceAmount = InsuranceTextBox;
                }
                var TransportInwardAmount = 0;
                if (TransportInwardTextBox != "") {
                    TransportInwardAmount = TransportInwardTextBox;
                }

                var TDSTax = 0;
                if (TDSTaxTextBox != "") {
                    TDSTax = TDSTaxTextBox;
                }

                var lblTax = $(row).find('td')[18];
                var lblCGSTTax = $(row).find('td')[19];
                var lblSGSTTax = $(row).find('td')[21];
                var lblIGSTTax = $(row).find('td')[23];
                var lastChar = LessDiscount.slice(-1);
                if (lastChar != '.') {
                    {
                        if (LessDiscount >= 0) {
                            debugger;
                            var Tax = lblTax.innerText;
                            var CGSTTax = lblCGSTTax.innerText;
                            var SGSTTax = lblSGSTTax.innerText;
                            var IGSTTax = lblIGSTTax.innerText;
                            var TotalAmount = lblTotalAmount.innerText;
                            var PackingChargesBagAmount = lblPackingChargesBagAmount.innerText;
                            var LessDiscountAmount = descountinpercentage * TotalAmount;
                            var APMCAmount = 0;
                            if (APMCTextBox != "") {
                                var TotalAmountForAPMC = parseFloat(TotalAmount) - parseFloat(LessDiscountAmount);
                                APMCAmount = APMCTextBox * TotalAmountForAPMC / 100;
                                // APMCAmount = APMCTextBox * TotalAmount / 100;
                            }
                            $(end).closest('tr').find('td').each(function (index, td) {
                                if (index == 14) {
                                    td.innerText = parseFloat(LessDiscountAmount).toFixed(2);
                                }

                                else if (index == 16) {
                                    $(this).closest('tr').find("input")[10].value = APMCAmount.toFixed(2);
                                }
                                else if (index == 17) {
                                    td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                }
                                else if (index == 20) {
                                    if (CGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 22) {
                                    if (SGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 24) {
                                    if (IGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                        td.innerText = (TotalTaxAmt);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 25) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 26) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 27) {
                                    $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                }
                                else if (index == 28) {
                                    $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                }
                                else if (index == 29) {
                                    $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                }

                                else if (index == 30) {
                                    var textbox = $(end).closest('tr').find('input')[16];
                                    textbox.value = "0";
                                }

                                else if (index == 31) {
                                    var textbox = $(end).closest('tr').find('input')[17];
                                    textbox.value = "0";
                                }
                                else if (index == 32) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }



                                else if (index == 33) {
                                    $(this).closest('tr').find("input")[18].value = TDSTax;
                                }
                                else if (index == 34) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 35) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }

                            });
                        }
                        //else {
                        //    var textbox = $(this).closest('tr').find('input')[1];
                        //    textbox.value = '';
                        //}
                    }
                }
            }
        });

        $(".APMC").on('input propertychange paste keypress', function (e) {
            var end = this;
            debugger;
            if (this.value != '') {
                var APMC = this.value;
                var descountinpercentageapmc = 0;
                if (APMC != '') {
                    descountinpercentageapmc = APMC / 100;
                }
                var row = $(this).closest('tr');
                var lblTotalAmount = $(row).find('td')[9];
                var lblPackingChargesBagAmount = $(row).find('td')[12];
                var lblLessDiscountAmount = $(row).find('td')[14];
                var HamaliTextBox = $(row).find('input')[11].value;
                var InsuranceTextBox = $(row).find('input')[12].value;
                var TransportInwardTextBox = $(row).find('input')[13].value;

                var TDSTaxTextBox = $(row).find('input')[18].value;

                var HamaliAmount = 0;
                if (HamaliTextBox != "") {
                    HamaliAmount = HamaliTextBox;
                }
                var InsuranceAmount = 0;
                if (InsuranceTextBox != "") {
                    InsuranceAmount = InsuranceTextBox;
                }
                var TransportInwardAmount = 0;
                if (TransportInwardTextBox != "") {
                    TransportInwardAmount = TransportInwardTextBox;
                }

                var TDSTax = 0;
                if (TDSTaxTextBox != "") {
                    TDSTax = TDSTaxTextBox;
                }

                var lblTax = $(row).find('td')[18];
                var lblCGSTTax = $(row).find('td')[19];
                var lblSGSTTax = $(row).find('td')[21];
                var lblIGSTTax = $(row).find('td')[23];
                var lastChar = APMC.slice(-1);
                if (lastChar != '.') {
                    {
                        if (APMC >= 0) {
                            debugger;
                            var Tax = lblTax.innerText;
                            var CGSTTax = lblCGSTTax.innerText;
                            var SGSTTax = lblSGSTTax.innerText;
                            var IGSTTax = lblIGSTTax.innerText;
                            var TotalAmount = lblTotalAmount.innerText;
                            var PackingChargesBagAmount = lblPackingChargesBagAmount.innerText;
                            var LessDiscountAmount = lblLessDiscountAmount.innerText;
                            var TotalAmountForAPMC = parseFloat(TotalAmount) - parseFloat(LessDiscountAmount);
                            var APMCAmount = descountinpercentageapmc * TotalAmountForAPMC;
                            $(end).closest('tr').find('td').each(function (index, td) {
                                if (index == 16) {
                                    $(this).closest('tr').find("input")[10].value = APMCAmount.toFixed(2);
                                }
                                else if (index == 17) {
                                    td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                }
                                else if (index == 20) {
                                    if (CGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 22) {
                                    if (SGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 24) {
                                    if (IGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                        td.innerText = (TotalTaxAmt);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 25) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 26) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 27) {
                                    $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                }
                                else if (index == 28) {
                                    $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                }
                                else if (index == 29) {
                                    $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                }

                                else if (index == 30) {
                                    var textbox = $(end).closest('tr').find('input')[16];
                                    textbox.value = "0";
                                }

                                else if (index == 31) {
                                    var textbox = $(end).closest('tr').find('input')[17];
                                    textbox.value = "0";
                                }
                                else if (index == 32) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }



                                else if (index == 33) {
                                    $(this).closest('tr').find("input")[18].value = TDSTax;
                                }
                                else if (index == 34) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 35) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }

                            });
                        }
                        //else {
                        //    var textbox = $(this).closest('tr').find('input')[1];
                        //    textbox.value = '';
                        //}
                    }
                }
            }
        });

        $(".APMCAmount").on('input propertychange paste keypress', function (e) {
            var end = this;
            debugger;
            if (this.value != '') {
                var APMCAmount = this.value;
                var row = $(this).closest('tr');
                var lblTotalAmount = $(row).find('td')[9];
                var lblPackingChargesBagAmount = $(row).find('td')[12];
                var lblLessDiscountAmount = $(row).find('td')[14];
                var HamaliTextBox = $(row).find('input')[11].value;
                var InsuranceTextBox = $(row).find('input')[12].value;
                var TransportInwardTextBox = $(row).find('input')[13].value;

                var TDSTaxTextBox = $(row).find('input')[18].value;

                var HamaliAmount = 0;
                if (HamaliTextBox != "") {
                    HamaliAmount = HamaliTextBox;
                }
                var InsuranceAmount = 0;
                if (InsuranceTextBox != "") {
                    InsuranceAmount = InsuranceTextBox;
                }
                var TransportInwardAmount = 0;
                if (TransportInwardTextBox != "") {
                    TransportInwardAmount = TransportInwardTextBox;
                }

                var TDSTax = 0;
                if (TDSTaxTextBox != "") {
                    TDSTax = TDSTaxTextBox;
                }

                var lblTax = $(row).find('td')[18];
                var lblCGSTTax = $(row).find('td')[19];
                var lblSGSTTax = $(row).find('td')[21];
                var lblIGSTTax = $(row).find('td')[23];
                var lastChar = APMCAmount.slice(-1);
                if (lastChar != '.') {
                    {
                        if (APMCAmount >= 0) {
                            debugger;
                            var Tax = lblTax.innerText;
                            var CGSTTax = lblCGSTTax.innerText;
                            var SGSTTax = lblSGSTTax.innerText;
                            var IGSTTax = lblIGSTTax.innerText;
                            var TotalAmount = lblTotalAmount.innerText;
                            var PackingChargesBagAmount = lblPackingChargesBagAmount.innerText;
                            var LessDiscountAmount = lblLessDiscountAmount.innerText;
                            $(end).closest('tr').find('td').each(function (index, td) {
                                if (index == 16) {
                                    $(this).closest('tr').find("input")[10].value = APMCAmount;
                                }
                                else if (index == 17) {
                                    td.innerText = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                }
                                else if (index == 20) {
                                    if (CGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 22) {
                                    if (SGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 24) {
                                    if (IGSTTax != 0) {
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        //td.innerText = (TotalTaxAmt / 2).toFixed(2);
                                        td.innerText = (TotalTaxAmt);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 25) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        td.innerText = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 26) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt)).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 27) {
                                    $(this).closest('tr').find("input")[11].value = HamaliAmount;
                                }
                                else if (index == 28) {
                                    $(this).closest('tr').find("input")[12].value = InsuranceAmount;
                                }
                                else if (index == 29) {
                                    $(this).closest('tr').find("input")[13].value = TransportInwardAmount;
                                }

                                else if (index == 30) {
                                    var textbox = $(end).closest('tr').find('input')[16];
                                    textbox.value = "0";
                                }

                                else if (index == 31) {
                                    var textbox = $(end).closest('tr').find('input')[17];
                                    textbox.value = "0";
                                }
                                else if (index == 32) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }



                                else if (index == 33) {
                                    $(this).closest('tr').find("input")[18].value = TDSTax;
                                }
                                else if (index == 34) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 35) {
                                    if (TotalAmount != 0 && TotalAmount != "") {
                                        var TotalTaxableAmount = ((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)).toFixed(2);
                                        var TotalTaxAmt = ((((parseFloat(TotalAmount) + parseFloat(APMCAmount) + parseFloat(PackingChargesBagAmount)) - parseFloat(LessDiscountAmount)) * Tax) / 100).toFixed(2);
                                        var GrandTotalAmt = (parseFloat(TotalTaxableAmount) + parseFloat(TotalTaxAmt) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }

                            });
                        }
                    }
                }
            }
        });

        $(".Hamali").on('input propertychange paste keypress', function (e) {
            var end = this;
            debugger;
            if (this.value != '') {
                var HamaliAmount = this.value;
                var row = $(this).closest('tr');
                var lblTotalAmount = $(row).find('td')[26];
                var InsuranceTextBox = $(row).find('input')[12].value;
                var TransportInwardTextBox = $(row).find('input')[13].value;

                var TDSTaxTextBox = $(row).find('input')[18].value;

                var InsuranceAmount = 0;
                if (InsuranceTextBox != "") {
                    InsuranceAmount = InsuranceTextBox;
                }
                var TransportInwardAmount = 0;
                if (TransportInwardTextBox != "") {
                    TransportInwardAmount = TransportInwardTextBox;
                }

                var TDSTax = 0;
                if (TDSTaxTextBox != "") {
                    TDSTax = TDSTaxTextBox;
                }

                var lastChar = InsuranceAmount.slice(-1);
                if (lastChar != '.') {
                    {
                        if (InsuranceAmount >= 0) {
                            debugger;
                            var TotalAmount = lblTotalAmount.innerText;
                            $(end).closest('tr').find('td').each(function (index, td) {
                                if (index == 32) {
                                    if (InsuranceAmount >= 0 && InsuranceAmount != "") {
                                        td.innerText = (parseFloat(TotalAmount) + parseFloat(InsuranceAmount) + parseFloat(HamaliAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 30) {
                                    var textbox = $(end).closest('tr').find('input')[16];
                                    textbox.value = "0";
                                }

                                else if (index == 31) {
                                    var textbox = $(end).closest('tr').find('input')[17];
                                    textbox.value = "0";
                                }



                                else if (index == 33) {
                                    $(this).closest('tr').find("input")[18].value = TDSTax;
                                }
                                else if (index == 34) {
                                    if (InsuranceAmount >= 0 && InsuranceAmount != "") {
                                        var GrandTotalAmt = (parseFloat(TotalAmount) + parseFloat(InsuranceAmount) + parseFloat(HamaliAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 35) {
                                    if (InsuranceAmount >= 0 && InsuranceAmount != "") {
                                        var GrandTotalAmt = (parseFloat(TotalAmount) + parseFloat(InsuranceAmount) + parseFloat(HamaliAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }

                            });
                        }
                        //else {
                        //    var textbox = $(this).closest('tr').find('input')[1];
                        //    textbox.value = '';
                        //}
                    }
                }
            }
        });

        $(".Insurance").on('input propertychange paste keypress', function (e) {
            var end = this;
            debugger;
            if (this.value != '') {
                var InsuranceAmount = this.value;
                var row = $(this).closest('tr');
                var lblTotalAmount = $(row).find('td')[26];
                var HamaliTextBox = $(row).find('input')[11].value;
                var TransportInwardTextBox = $(row).find('input')[13].value;

                var TDSTaxTextBox = $(row).find('input')[18].value;

                var TransportInwardAmount = 0;
                if (TransportInwardTextBox != "") {
                    TransportInwardAmount = TransportInwardTextBox;
                }
                var HamaliAmount = 0;
                if (HamaliTextBox != "") {
                    HamaliAmount = HamaliTextBox;
                }

                var TDSTax = 0;
                if (TDSTaxTextBox != "") {
                    TDSTax = TDSTaxTextBox;
                }

                var lastChar = InsuranceAmount.slice(-1);
                if (lastChar != '.') {
                    {
                        if (InsuranceAmount >= 0) {
                            debugger;
                            var TotalAmount = lblTotalAmount.innerText;
                            $(end).closest('tr').find('td').each(function (index, td) {
                                if (index == 32) {
                                    if (InsuranceAmount >= 0 && InsuranceAmount != "") {
                                        td.innerText = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 30) {
                                    var textbox = $(end).closest('tr').find('input')[16];
                                    textbox.value = "0";
                                }

                                else if (index == 31) {
                                    var textbox = $(end).closest('tr').find('input')[17];
                                    textbox.value = "0";
                                }




                                else if (index == 33) {
                                    $(this).closest('tr').find("input")[18].value = TDSTax;
                                }
                                else if (index == 34) {
                                    if (InsuranceAmount >= 0 && InsuranceAmount != "") {
                                        var GrandTotalAmt = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 35) {
                                    if (InsuranceAmount >= 0 && InsuranceAmount != "") {
                                        var GrandTotalAmt = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }

                            });
                        }
                        //else {
                        //    var textbox = $(this).closest('tr').find('input')[1];
                        //    textbox.value = '';
                        //}
                    }
                }
            }
        });

        $(".TransportInward").on('input propertychange paste keypress', function (e) {
            var end = this;
            debugger;
            if (this.value != '') {
                var TransportInwardAmount = this.value;
                var row = $(this).closest('tr');
                var lblTotalAmount = $(row).find('td')[26];
                var HamaliTextBox = $(row).find('input')[11].value;
                var InsuranceTextBox = $(row).find('input')[12].value;

                var TDSTaxTextBox = $(row).find('input')[18].value;

                var InsuranceAmount = 0;
                if (InsuranceTextBox != "") {
                    InsuranceAmount = InsuranceTextBox;
                }
                var HamaliAmount = 0;
                if (HamaliTextBox != "") {
                    HamaliAmount = HamaliTextBox;
                }

                var TDSTax = 0;
                if (TDSTaxTextBox != "") {
                    TDSTax = TDSTaxTextBox;
                }

                var lastChar = TransportInwardAmount.slice(-1);
                if (lastChar != '.') {
                    {
                        if (TransportInwardAmount >= 0) {
                            debugger;
                            var TotalAmount = lblTotalAmount.innerText;
                            $(end).closest('tr').find('td').each(function (index, td) {
                                if (index == 32) {
                                    if (TransportInwardAmount >= 0 && TransportInwardAmount != "") {
                                        td.innerText = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                else if (index == 30) {
                                    var textbox = $(end).closest('tr').find('input')[16];
                                    textbox.value = "0";
                                }
                                else if (index == 31) {
                                    var textbox = $(end).closest('tr').find('input')[17];
                                    textbox.value = "0";
                                }



                                else if (index == 33) {
                                    $(this).closest('tr').find("input")[18].value = TDSTax;
                                }
                                if (index == 34) {
                                    if (TransportInwardAmount >= 0 && TransportInwardAmount != "") {
                                        var GrandTotalAmt = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }
                                if (index == 35) {
                                    if (TransportInwardAmount >= 0 && TransportInwardAmount != "") {
                                        var GrandTotalAmt = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                                        var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                        td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                    }
                                    else {
                                        td.innerText = 0;
                                    }
                                }


                            });
                        }
                        //else {
                        //    var textbox = $(this).closest('tr').find('input')[1];
                        //    textbox.value = '';
                        //}
                    }
                }
            }
        });

        $(".TCSAmount").on('input propertychange paste keypress', function (e) {
            var end = this;
            debugger;
            if (this.value != '') {
                var TCSAmount = this.value;
                var row = $(this).closest('tr');
                var lblTotalAmount = $(row).find('td')[26];
                var HamaliTextBox = $(row).find('input')[11].value;
                var InsuranceTextBox = $(row).find('input')[12].value;
                var TransportInwardTextBox = $(row).find('input')[13].value;

                var TDSTaxTextBox = $(row).find('input')[18].value;

                var InsuranceAmount = 0;
                if (InsuranceTextBox != "") {
                    InsuranceAmount = InsuranceTextBox;
                }
                var HamaliAmount = 0;
                if (HamaliTextBox != "") {
                    HamaliAmount = HamaliTextBox;
                }
                var TransportInwardAmount = 0;
                if (TransportInwardTextBox != "") {
                    TransportInwardAmount = TransportInwardTextBox;
                }

                var TDSTax = 0;
                if (TDSTaxTextBox != "") {
                    TDSTax = TDSTaxTextBox;
                }

                var lastChar = TCSAmount.slice(-1);
                if (lastChar != '.') {
                    {
                        if (TCSAmount != '') {
                            debugger;
                            var TotalAmount = lblTotalAmount.innerText;
                            var GrandTotalAmount = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount)).toFixed(2);
                            $(end).closest('tr').find('td').each(function (index, td) {
                                if (TCSAmount != 0) {
                                    if (index == 32) {
                                        if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                            td.innerText = (parseFloat(GrandTotalAmount) + parseFloat(TCSAmount)).toFixed(2);
                                        }
                                        else {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }
                                    }


                                    else if (index == 33) {
                                        $(this).closest('tr').find("input")[18].value = TDSTax;
                                    }
                                    else if (index == 34) {
                                        if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                            var GrandTotalAmt = (parseFloat(GrandTotalAmount) + parseFloat(TCSAmount)).toFixed(2);
                                            var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                            td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                        }
                                        else {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }
                                    }
                                    else if (index == 35) {
                                        if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                            var GrandTotalAmt = (parseFloat(GrandTotalAmount) + parseFloat(TCSAmount)).toFixed(2);
                                            var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                            td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                        }
                                        else {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }
                                    }

                                }
                                else {
                                    if (index == 32) {
                                        if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                            td.innerText = (parseFloat(GrandTotalAmount)).toFixed(2);
                                        }
                                        else {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }
                                    }


                                    else if (index == 33) {
                                        $(this).closest('tr').find("input")[18].value = TDSTax;
                                    }
                                    if (index == 34) {
                                        if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                            var GrandTotalAmt = (parseFloat(GrandTotalAmount)).toFixed(2);
                                            var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                            td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                        }
                                        else {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }
                                    }
                                    if (index == 35) {
                                        if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                            var GrandTotalAmt = (parseFloat(GrandTotalAmount)).toFixed(2);
                                            var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                            td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                        }
                                        else {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }
                                    }

                                }
                            });
                        }
                    }
                }
            }
        });

        $(".RoundOff").on('input propertychange paste keypress', function (e) {
            var end = this;
            debugger;
            if (this.value != '') {
                var RoundOff = this.value;
                var row = $(this).closest('tr');
                var lblTotalAmount = $(row).find('td')[26];
                var HamaliTextBox = $(row).find('input')[11].value;
                var InsuranceTextBox = $(row).find('input')[12].value;
                var TransportInwardTextBox = $(row).find('input')[13].value;
                var TCSAmountTextBox = $(row).find('input')[16].value;

                var TDSTaxTextBox = $(row).find('input')[18].value;

                var InsuranceAmount = 0;
                if (InsuranceTextBox != "") {
                    InsuranceAmount = InsuranceTextBox;
                }
                var HamaliAmount = 0;
                if (HamaliTextBox != "") {
                    HamaliAmount = HamaliTextBox;
                }
                var TransportInwardAmount = 0;
                if (TransportInwardTextBox != "") {
                    TransportInwardAmount = TransportInwardTextBox;
                }
                var TCSAmount = 0;
                if (TCSAmountTextBox != "") {
                    TCSAmount = TCSAmountTextBox;
                }

                var TDSTax = 0;
                if (TDSTaxTextBox != "") {
                    TDSTax = TDSTaxTextBox;
                }

                var lastChar = RoundOff.slice(-1);
                if (lastChar != '.') {
                    {
                        if (RoundOff != '') {
                            debugger;
                            var TotalAmount = lblTotalAmount.innerText;
                            var GrandTotalAmount = (parseFloat(TotalAmount) + parseFloat(HamaliAmount) + parseFloat(InsuranceAmount) + parseFloat(TransportInwardAmount) + parseFloat(TCSAmount)).toFixed(2);
                            $(end).closest('tr').find('td').each(function (index, td) {

                                if (RoundOff != 0) {
                                    if (index == 32) {
                                        if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                            td.innerText = (parseFloat(GrandTotalAmount) + parseFloat(RoundOff)).toFixed(2);
                                        }
                                        else {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }
                                    }



                                    else if (index == 33) {
                                        $(this).closest('tr').find("input")[18].value = TDSTax;
                                    }
                                    else if (index == 34) {
                                        if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                            var GrandTotalAmt = (parseFloat(GrandTotalAmount) + parseFloat(RoundOff)).toFixed(2);
                                            var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                            td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                        }
                                        else {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }
                                    }
                                    else if (index == 35) {
                                        if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                            var GrandTotalAmt = (parseFloat(GrandTotalAmount) + parseFloat(RoundOff)).toFixed(2);
                                            var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                            td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                        }
                                        else {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }
                                    }

                                }
                                else {
                                    if (index == 32) {
                                        if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                            td.innerText = (parseFloat(GrandTotalAmount)).toFixed(2);
                                        }
                                        else {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }
                                    }




                                    else if (index == 33) {
                                        $(this).closest('tr').find("input")[18].value = TDSTax;
                                    }
                                    else if (index == 34) {
                                        if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                            var GrandTotalAmt = (parseFloat(GrandTotalAmount)).toFixed(2);
                                            var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                            td.innerText = (parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                        }
                                        else {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }
                                    }
                                    else if (index == 35) {
                                        if (GrandTotalAmount >= 0 && GrandTotalAmount != "") {
                                            var GrandTotalAmt = (parseFloat(GrandTotalAmount)).toFixed(2);
                                            var TDSTaxAmt = (((parseFloat(GrandTotalAmt)) * TDSTax) / 100).toFixed(2);
                                            td.innerText = ((parseFloat(GrandTotalAmt)) - parseFloat(Math.round(TDSTaxAmt))).toFixed(2);
                                        }
                                        else {
                                            var textbox = $(end).closest('tr').find('input')[16];
                                            textbox.value = "0";
                                        }
                                    }

                                }
                            });
                        }
                    }
                }
            }
        });

        //New
        $("#btncalculate").click(function () {
            debugger;
            FinalTotal();
        });

        function FinalTotal() {
            var GrandTotal = 0;
            $('#PurchaseQty').find('tr:visible').not(':last').each(function (index, tr) {
                $(tr).find('td').each(function (index, td) {
                    // if (index == 32) {
                    if (index == 35) {
                        if (td.innerText.trim() != '') {
                            GrandTotal = GrandTotal + parseFloat(td.innerText);
                            $('#GrandTotal').text(parseFloat(GrandTotal).toFixed(2));
                        }
                    }
                });
            });
        }
        //New

    });
</script>

<script>

    var GrandTotal = 0;

    $("#btnsave").click(function () {
        if (!($('#frmPurchase').parsley().validate())) {
            return;
        }
        $("#loader").show();
        var lstPurchaseQty = [];
        debugger;
        $('#PurchaseQty').children('tbody').children('tr:visible').each(function (index, row) {
            if ($(row).find("select").val() != undefined && $(row).find("select").val() != '') {
                var dataPurchaseQty = new Object();
                dataPurchaseQty.ProductID = $(row).find("select").val();
                dataPurchaseQty.ProductName = $(row).find("select option:selected").text();
                dataPurchaseQty.VakalNumber = $(row).find("input")[1].value;
                dataPurchaseQty.NoofBags = $(row).find("input")[2].value;
                dataPurchaseQty.GrossWeight = $(row).find("input")[3].value;
                dataPurchaseQty.TareWeight = $(row).find("input")[4].value;
                dataPurchaseQty.RatePerKG = $(row).find("input")[5].value;
                dataPurchaseQty.RatePerBags = $(row).find("input")[6].value;
                dataPurchaseQty.PackingChargesBag = $(row).find("input")[7].value;
                dataPurchaseQty.LessDiscount = $(row).find("input")[8].value;
                dataPurchaseQty.APMC = $(row).find("input")[9].value;
                dataPurchaseQty.APMCAmount = $(row).find("input")[10].value;
                dataPurchaseQty.Hamali = $(row).find("input")[11].value;
                dataPurchaseQty.Insurance = $(row).find("input")[12].value;
                dataPurchaseQty.TransportInward = $(row).find("input")[13].value;
                dataPurchaseQty.CategoryTypeID = $(row).find("input")[14].value;
                dataPurchaseQty.PurchaseQtyID = $(row).find("input")[15].value;
                dataPurchaseQty.TCSAmount = $(row).find("input")[16].value;
                dataPurchaseQty.RoundOff = $(row).find("input")[17].value;

                dataPurchaseQty.TDSTax = $(row).find("input")[18].value;

                dataPurchaseQty.HSNNumber = $(row).find('td')[2].innerText;
                dataPurchaseQty.NetWeight = $(row).find('td')[7].innerText;
                dataPurchaseQty.Amount = $(row).find('td')[9].innerText;
                dataPurchaseQty.TotalPackingCharge = $(row).find('td')[12].innerText;
                dataPurchaseQty.DiscountAmount = $(row).find('td')[14].innerText;
                //dataPurchaseQty.APMCAmount = $(row).find('td')[16].innerText;
                dataPurchaseQty.TotalTaxableAmount = $(row).find('td')[17].innerText;
                dataPurchaseQty.TotalTax = $(row).find('td')[18].innerText;
                dataPurchaseQty.CGSTTax = $(row).find('td')[19].innerText;
                dataPurchaseQty.CGSTTaxAmount = $(row).find('td')[20].innerText;
                dataPurchaseQty.SGSTTax = $(row).find('td')[21].innerText;
                dataPurchaseQty.SGSTTaxAmount = $(row).find('td')[22].innerText;
                dataPurchaseQty.IGSTTax = $(row).find('td')[23].innerText;
                dataPurchaseQty.IGSTTaxAmount = $(row).find('td')[24].innerText;
                dataPurchaseQty.TotalTaxAmount = $(row).find('td')[25].innerText;
                dataPurchaseQty.TotalAmount = $(row).find('td')[26].innerText;
                dataPurchaseQty.GrandTotalAmount = $(row).find('td')[32].innerText;

                dataPurchaseQty.TDSTaxAmount = $(row).find('td')[34].innerText;
                dataPurchaseQty.AmountAfterTDS = $(row).find('td')[35].innerText;

                GrandTotal = parseFloat(GrandTotal) + parseFloat(dataPurchaseQty.GrandTotalAmount);
                lstPurchaseQty.push(dataPurchaseQty);
            }
        });

        debugger;
        //var abc = $('#PurchaseQty').children('tbody').find('#GTID')
        //var GrandTotal = abc.find('td').find('#GrandTotal').text();
        //GrandTotal;

        if (GrandTotal < 100000) {
            var datareq = new Object();
            datareq.PurchaseID = $("#PurchaseID").val();
            datareq.SupplierID = $("#SupplierID").val();
            datareq.ShipTo = $("#ShipTo").val();
            datareq.Tax = $("#Tax").val();
            datareq.BillNumber = $("#BillNumber").val();
            datareq.BillDate = $("#BillDate").val();
            datareq.PurchaseTypeID = $("#PurchaseTypeID").val();
            datareq.DeliveryChallanNumber = $("#DeliveryChallanNumber").val();
            datareq.DeliveryChallanDate = $("#DeliveryChallanDate").val();
            datareq.PurchaseDebitAccountTypeID = $("#PurchaseDebitAccountTypeID").val();
            datareq.BrokerID = $("#BrokerID").val();
            datareq.EWayNumber = $("#EWayNumber").val();
            datareq.GodownID = $("#GodownID").val();

            datareq.TDSCategoryID = $("#TDSCategoryID").val();

            datareq.CreatedBy = $("#CreatedBy").val();
            datareq.CreatedOn = $("#CreatedOn").val();
            datareq.AvakNumber = $("#AvakNumber").val();
            datareq.Verify = $("#Verify").val();
            datareq.lstPurchaseQty = lstPurchaseQty;
            $.ajax({
                url: '@Url.Action("AddPurchaseBill")',
                type: 'POST',
                data: { 'data': datareq },
                cache: false,
            }).done(function (result) {
                debugger;
                if (result == "Insert Sucessfully") {
                    $("#loader").show();
                    $('div#sucessalert').html("Insert Sucessfully.");
                    showhidealert();
                    clearform();
                }
                else if (result == "Bill Exist") {
                    $('div#sucessalert').html("Bill Exist.");
                    //$('div#sucessalert').html("Bill Exist.");
                    showhidealert();
                    $("#loader").hide();
                }
                else if (result == "Updated Sucessfully") {
                    $('div#sucessalert').html("Updated Sucessfully.");
                    showhidealert();
                }
                else {
                    $('div#sucessalert').html("something is wrong.");
                }
            });

        }
        else if (GrandTotal > 100000 && $("#EWayNumber").val() != "") {
            var datareq = new Object();
            datareq.PurchaseID = $("#PurchaseID").val();
            datareq.SupplierID = $("#SupplierID").val();
            datareq.ShipTo = $("#ShipTo").val();
            datareq.Tax = $("#Tax").val();
            datareq.BillNumber = $("#BillNumber").val();
            datareq.BillDate = $("#BillDate").val();
            datareq.PurchaseTypeID = $("#PurchaseTypeID").val();
            datareq.DeliveryChallanNumber = $("#DeliveryChallanNumber").val();
            datareq.DeliveryChallanDate = $("#DeliveryChallanDate").val();
            datareq.PurchaseDebitAccountTypeID = $("#PurchaseDebitAccountTypeID").val();
            datareq.BrokerID = $("#BrokerID").val();
            datareq.EWayNumber = $("#EWayNumber").val();
            datareq.GodownID = $("#GodownID").val();

            datareq.TDSCategoryID = $("#TDSCategoryID").val();

            datareq.CreatedBy = $("#CreatedBy").val();
            datareq.CreatedOn = $("#CreatedOn").val();
            datareq.AvakNumber = $("#AvakNumber").val();
            datareq.Verify = $("#Verify").val();
            datareq.lstPurchaseQty = lstPurchaseQty;
            $.ajax({
                url: '@Url.Action("AddPurchaseBill")',
                type: 'POST',
                data: { 'data': datareq },
                cache: false,
            }).done(function (result) {
                debugger;
                if (result == "Insert Sucessfully") {
                    $("#loader").show();
                    $('div#sucessalert').html("Insert Sucessfully.");
                    showhidealert();
                    clearform();
                }
                else if (result == "Bill Exist") {
                    $('div#sucessalert').html("Bill Exist.");
                    //$('div#sucessalert').html("Bill Exist.");
                    showhidealert();
                    $("#loader").hide();
                }
                else if (result == "Updated Sucessfully") {
                    $('div#sucessalert').html("Updated Sucessfully.");
                    showhidealert();
                }
                else {
                    $('div#sucessalert').html("something is wrong.");
                }
            });
        }

        else if (GrandTotal > 100000 && $("#EWayNumber").val() == "" && ($("#PurchaseDebitAccountTypeID").val() == "4" || $("#PurchaseDebitAccountTypeID").val() == "7")) {
            var datareq = new Object();
            datareq.PurchaseID = $("#PurchaseID").val();
            datareq.SupplierID = $("#SupplierID").val();
            datareq.ShipTo = $("#ShipTo").val();
            datareq.Tax = $("#Tax").val();
            datareq.BillNumber = $("#BillNumber").val();
            datareq.BillDate = $("#BillDate").val();
            datareq.PurchaseTypeID = $("#PurchaseTypeID").val();
            datareq.DeliveryChallanNumber = $("#DeliveryChallanNumber").val();
            datareq.DeliveryChallanDate = $("#DeliveryChallanDate").val();
            datareq.PurchaseDebitAccountTypeID = $("#PurchaseDebitAccountTypeID").val();
            datareq.BrokerID = $("#BrokerID").val();
            datareq.EWayNumber = $("#EWayNumber").val();
            datareq.GodownID = $("#GodownID").val();

            datareq.TDSCategoryID = $("#TDSCategoryID").val();

            datareq.CreatedBy = $("#CreatedBy").val();
            datareq.CreatedOn = $("#CreatedOn").val();
            datareq.AvakNumber = $("#AvakNumber").val();
            datareq.Verify = $("#Verify").val();
            datareq.lstPurchaseQty = lstPurchaseQty;
            $.ajax({
                url: '@Url.Action("AddPurchaseBill")',
                type: 'POST',
                data: { 'data': datareq },
                cache: false,
            }).done(function (result) {
                debugger;
                if (result == "Insert Sucessfully") {
                    $("#loader").show();
                    $('div#sucessalert').html("Insert Sucessfully.");
                    showhidealert();
                    clearform();
                }
                else if (result == "Bill Exist") {
                    $('div#sucessalert').html("Bill Exist.");
                    //$('div#sucessalert').html("Bill Exist.");
                    showhidealert();
                    $("#loader").hide();
                }
                else if (result == "Updated Sucessfully") {
                    $('div#sucessalert').html("Updated Sucessfully.");
                    showhidealert();
                }
                else {
                    $('div#sucessalert').html("something is wrong.");
                }
            });
        }

        else {
            if (confirm('Please Enter E-Way Number')) {
                $("#btnsave").prop("disabled", true);
                $("#loader").hide();
            }
        }
        $("#loader").hide();
    });

    $("#EWayNumber").on('blur', function (e) {
        debugger;
        var EWayNumber = this.value;

        //var abc = $('#PurchaseQty').children('tbody').find('#GTID')
        //var GrandTotal = abc.find('td').find('#GrandTotal').text();
        //GrandTotal;

        //if (GrandTotal != " ") {
        if (GrandTotal != 0) {
            if (EWayNumber != null && EWayNumber != "" && EWayNumber != undefined) {
                $("#btnsave").prop("disabled", false);
            }
            else {
                $("#btnsave").prop("disabled", true);
            }
        }
    });

    $("#btncancel").click(function () {
        clearform();
    });

    function clearform() {
        location.reload();
    }
</script>